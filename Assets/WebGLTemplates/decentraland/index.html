<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Decentraland</title>
    <script src="%UNITY_WEBGL_LOADER_URL%"></script>
    <script>
        window.startDecentraland = function () {
                /*! Decentraland Gamekit 1.0.0 */;
            (function webpackUniversalModuleDefinition(root, factory) {
                if (typeof exports === 'object' && typeof module === 'object')
                    module.exports = factory();
                else if (typeof define === 'function' && define.amd)
                    define([], factory);
                else {
                    var a = factory();
                    for (var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
                }
            })(window, function () {
                return /******/ (function (modules) { // webpackBootstrap
    /******/ 	// The module cache
    /******/ 	var installedModules = {};
    /******/
    /******/ 	// The require function
    /******/ 	function __webpack_require__(moduleId) {
    /******/
    /******/ 		// Check if module is in cache
    /******/ 		if (installedModules[moduleId]) {
    /******/ 			return installedModules[moduleId].exports;
                            /******/
                        }
    /******/ 		// Create a new module (and put it into the cache)
    /******/ 		var module = installedModules[moduleId] = {
    /******/ 			i: moduleId,
    /******/ 			l: false,
    /******/ 			exports: {}
                            /******/
                        };
    /******/
    /******/ 		// Execute the module function
    /******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
    /******/
    /******/ 		// Flag the module as loaded
    /******/ 		module.l = true;
    /******/
    /******/ 		// Return the exports of the module
    /******/ 		return module.exports;
                        /******/
                    }
    /******/
    /******/
    /******/ 	// expose the modules object (__webpack_modules__)
    /******/ 	__webpack_require__.m = modules;
    /******/
    /******/ 	// expose the module cache
    /******/ 	__webpack_require__.c = installedModules;
    /******/
    /******/ 	// define getter function for harmony exports
    /******/ 	__webpack_require__.d = function (exports, name, getter) {
    /******/ 		if (!__webpack_require__.o(exports, name)) {
    /******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
                            /******/
                        }
                        /******/
                    };
    /******/
    /******/ 	// define __esModule on exports
    /******/ 	__webpack_require__.r = function (exports) {
    /******/ 		if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
    /******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
                            /******/
                        }
    /******/ 		Object.defineProperty(exports, '__esModule', { value: true });
                        /******/
                    };
    /******/
    /******/ 	// create a fake namespace object
    /******/ 	// mode & 1: value is a module id, require it
    /******/ 	// mode & 2: merge all properties of value into the ns
    /******/ 	// mode & 4: return value when already ns object
    /******/ 	// mode & 8|1: behave like require
    /******/ 	__webpack_require__.t = function (value, mode) {
    /******/ 		if (mode & 1) value = __webpack_require__(value);
    /******/ 		if (mode & 8) return value;
    /******/ 		if ((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
    /******/ 		var ns = Object.create(null);
    /******/ 		__webpack_require__.r(ns);
    /******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
    /******/ 		if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) { return value[key]; }.bind(null, key));
    /******/ 		return ns;
                        /******/
                    };
    /******/
    /******/ 	// getDefaultExport function for compatibility with non-harmony modules
    /******/ 	__webpack_require__.n = function (module) {
    /******/ 		var getter = module && module.__esModule ?
    /******/ 			function getDefault() { return module['default']; } :
    /******/ 			function getModuleExports() { return module; };
    /******/ 		__webpack_require__.d(getter, 'a', getter);
    /******/ 		return getter;
                        /******/
                    };
    /******/
    /******/ 	// Object.prototype.hasOwnProperty.call
    /******/ 	__webpack_require__.o = function (object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
    /******/
    /******/ 	// __webpack_public_path__
    /******/ 	__webpack_require__.p = "";
    /******/
    /******/
    /******/ 	// Load entry module and return exports
    /******/ 	return __webpack_require__(__webpack_require__.s = "./packages/decentraland-ecs/src/index.ts");
                    /******/
                })
    /************************************************************************/
    /******/({

    /***/ "./packages/decentraland-ecs/src/decentraland/Components.ts":
    /*!******************************************************************!*\
      !*** ./packages/decentraland-ecs/src/decentraland/Components.ts ***!
      \******************************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Component_1 = __webpack_require__(/*! ../ecs/Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\");\nvar helpers_1 = __webpack_require__(/*! ../ecs/helpers */ \"./packages/decentraland-ecs/src/ecs/helpers.ts\");\n/**\n * @public\n */\nvar Vector = /** @class */ (function (_super) {\n    __extends(Vector, _super);\n    function Vector(_x, _y, _z) {\n        if (_x === void 0) { _x = 0; }\n        if (_y === void 0) { _y = 0; }\n        if (_z === void 0) { _z = 0; }\n        var _this = _super.call(this) || this;\n        _this.x = 0;\n        _this.y = 0;\n        _this.z = 0;\n        _this.x = _x;\n        _this.y = _y;\n        _this.z = _z;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Vector.prototype, \"x\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Vector.prototype, \"y\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Vector.prototype, \"z\", void 0);\n    return Vector;\n}(Component_1.ProxyComponent));\nexports.Vector = Vector;\n/**\n * @public\n */\nvar Position = /** @class */ (function (_super) {\n    __extends(Position, _super);\n    function Position() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Position = __decorate([\n        Component_1.Component('engine.position')\n    ], Position);\n    return Position;\n}(Vector));\nexports.Position = Position;\n/**\n * @public\n */\nvar Rotation = /** @class */ (function (_super) {\n    __extends(Rotation, _super);\n    function Rotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rotation = __decorate([\n        Component_1.Component('engine.rotation')\n    ], Rotation);\n    return Rotation;\n}(Vector));\nexports.Rotation = Rotation;\n/**\n * @public\n */\nvar Scale = /** @class */ (function (_super) {\n    __extends(Scale, _super);\n    function Scale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Scale = __decorate([\n        Component_1.Component('engine.scale')\n    ], Scale);\n    return Scale;\n}(Vector));\nexports.Scale = Scale;\n/**\n * @public\n */\nvar Shape = /** @class */ (function (_super) {\n    __extends(Shape, _super);\n    function Shape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Set to true to turn on the collider for the entity.\n         */\n        _this.withCollisions = false;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Boolean)\n    ], Shape.prototype, \"withCollisions\", void 0);\n    return Shape;\n}(Component_1.ProxyComponent));\nexports.Shape = Shape;\n/**\n * @public\n */\nvar BoxShape = /** @class */ (function (_super) {\n    __extends(BoxShape, _super);\n    function BoxShape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.tag = 'box';\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], BoxShape.prototype, \"tag\", void 0);\n    BoxShape = __decorate([\n        Component_1.Component('engine.shape')\n    ], BoxShape);\n    return BoxShape;\n}(Shape));\nexports.BoxShape = BoxShape;\n/**\n * @public\n */\nvar SphereShape = /** @class */ (function (_super) {\n    __extends(SphereShape, _super);\n    function SphereShape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.tag = 'sphere';\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], SphereShape.prototype, \"tag\", void 0);\n    SphereShape = __decorate([\n        Component_1.Component('engine.shape')\n    ], SphereShape);\n    return SphereShape;\n}(Shape));\nexports.SphereShape = SphereShape;\n/**\n * @public\n */\nvar PlaneShape = /** @class */ (function (_super) {\n    __extends(PlaneShape, _super);\n    function PlaneShape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.tag = 'plane';\n        /**\n         * Sets the horizontal length of the plane. Defaults to 1.\n         */\n        _this.width = 1;\n        /**\n         * Sets the vertical length of the plane. Defaults to 1.\n         */\n        _this.height = 1;\n        /**\n         * Sets the UV coordinates for the plane.\n         * Used to map specific pieces of a Material's texture into the plane's geometry.\n         */\n        _this.uvs = [];\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], PlaneShape.prototype, \"tag\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], PlaneShape.prototype, \"width\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], PlaneShape.prototype, \"height\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Array)\n    ], PlaneShape.prototype, \"uvs\", void 0);\n    PlaneShape = __decorate([\n        Component_1.Component('engine.shape')\n    ], PlaneShape);\n    return PlaneShape;\n}(Shape));\nexports.PlaneShape = PlaneShape;\n/**\n * @public\n */\nvar ConeShape = /** @class */ (function (_super) {\n    __extends(ConeShape, _super);\n    function ConeShape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.tag = 'cone';\n        /**\n         * The radius of the top of a truncated cone. Defaults to 0.\n         */\n        _this.radiusTop = 0;\n        /**\n         * The radius of the base of the cone. Defaults to 1.\n         */\n        _this.radiusBottom = 1;\n        /**\n         * Sets the number of rings along the cone height (positive integer). Defaults to 1.\n         */\n        _this.segmentsHeight = 1;\n        /**\n         * Sets the number of cone sides (positive integer). Defaults to 36.\n         */\n        _this.segmentsRadial = 36;\n        /**\n         * Adds two extra faces per subdivision to enclose the cone around its height axis.\n         * Defaults to false.\n         */\n        _this.openEnded = false;\n        /**\n         * Sets the radius of the top and bottom caps at once.\n         *\n         * Properties `radiusTop` and `radiusBottom` are prioritized over this one.\n         */\n        _this.radius = null;\n        /**\n         * Sets the ratio (max 1) to apply to the circumference to slice the cone. Defaults to 360.\n         */\n        _this.arc = 360;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], ConeShape.prototype, \"tag\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], ConeShape.prototype, \"radiusTop\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], ConeShape.prototype, \"radiusBottom\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], ConeShape.prototype, \"segmentsHeight\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], ConeShape.prototype, \"segmentsRadial\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Boolean)\n    ], ConeShape.prototype, \"openEnded\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Object)\n    ], ConeShape.prototype, \"radius\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], ConeShape.prototype, \"arc\", void 0);\n    ConeShape = __decorate([\n        Component_1.Component('engine.shape')\n    ], ConeShape);\n    return ConeShape;\n}(Shape));\nexports.ConeShape = ConeShape;\n/**\n * @public\n */\nvar CylinderShape = /** @class */ (function (_super) {\n    __extends(CylinderShape, _super);\n    function CylinderShape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.tag = 'cylinder';\n        /**\n         * The radius of the top of the cylinder. Defaults to 0.\n         */\n        _this.radiusTop = 0;\n        /**\n         * The radius of the base of the cylinder. Defaults to 1.\n         */\n        _this.radiusBottom = 1;\n        /**\n         * Sets the number of rings along the cylinder height (positive integer). Defaults to 1.\n         */\n        _this.segmentsHeight = 1;\n        /**\n         * Sets the number of cylinder sides (positive integer). Defaults to 36.\n         */\n        _this.segmentsRadial = 36;\n        /**\n         * Adds two extra faces per subdivision to enclose the cylinder around its height axis.\n         * Defaults to false.\n         */\n        _this.openEnded = false;\n        /**\n         * Sets the radius of the top and bottom caps at once.\n         *\n         * Properties `radiusTop` and `radiusBottom` are prioritized over this one.\n         */\n        _this.radius = null;\n        /**\n         * Sets the ratio (max 1) to apply to the circumference to slice the cylinder. Defaults to 360.\n         */\n        _this.arc = 360;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], CylinderShape.prototype, \"tag\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], CylinderShape.prototype, \"radiusTop\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], CylinderShape.prototype, \"radiusBottom\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], CylinderShape.prototype, \"segmentsHeight\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], CylinderShape.prototype, \"segmentsRadial\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Boolean)\n    ], CylinderShape.prototype, \"openEnded\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Object)\n    ], CylinderShape.prototype, \"radius\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], CylinderShape.prototype, \"arc\", void 0);\n    CylinderShape = __decorate([\n        Component_1.Component('engine.shape')\n    ], CylinderShape);\n    return CylinderShape;\n}(Shape));\nexports.CylinderShape = CylinderShape;\n/**\n * @public\n */\nvar GLTFShape = /** @class */ (function (_super) {\n    __extends(GLTFShape, _super);\n    function GLTFShape(src) {\n        var _this = _super.call(this) || this;\n        _this.tag = 'gltf-model';\n        _this.src = src;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], GLTFShape.prototype, \"tag\", void 0);\n    __decorate([\n        Shape.readonly,\n        __metadata(\"design:type\", String)\n    ], GLTFShape.prototype, \"src\", void 0);\n    GLTFShape = __decorate([\n        Component_1.Component('engine.shape'),\n        __metadata(\"design:paramtypes\", [String])\n    ], GLTFShape);\n    return GLTFShape;\n}(Shape));\nexports.GLTFShape = GLTFShape;\n/**\n * @public\n */\nvar OBJShape = /** @class */ (function (_super) {\n    __extends(OBJShape, _super);\n    function OBJShape(src) {\n        var _this = _super.call(this) || this;\n        _this.tag = 'obj-model';\n        _this.src = src;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], OBJShape.prototype, \"tag\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], OBJShape.prototype, \"src\", void 0);\n    OBJShape = __decorate([\n        Component_1.Component('engine.shape'),\n        __metadata(\"design:paramtypes\", [String])\n    ], OBJShape);\n    return OBJShape;\n}(Shape));\nexports.OBJShape = OBJShape;\n/**\n * @public\n */\nvar Material = /** @class */ (function (_super) {\n    __extends(Material, _super);\n    function Material() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * @internal\n         */\n        _this.tag = 'material';\n        /**\n         * Opacity.\n         */\n        _this.alpha = 1;\n        /**\n         * AKA Diffuse Color in other nomenclature.\n         */\n        _this.albedoColor = '#CCCCCCC';\n        /**\n         * The color emitted from the material.\n         */\n        _this.emissiveColor = '#000000';\n        /**\n         * Specifies the metallic scalar of the metallic/roughness workflow.\n         * Can also be used to scale the metalness values of the metallic texture.\n         */\n        _this.metallic = 0.5;\n        /**\n         * Specifies the roughness scalar of the metallic/roughness workflow.\n         * Can also be used to scale the roughness values of the metallic texture.\n         */\n        _this.roughness = 0.5;\n        /**\n         * AKA Diffuse Color in other nomenclature.\n         */\n        _this.ambientColor = '#000000';\n        /**\n         * The color reflected from the material.\n         */\n        _this.reflectionColor = '#FFFFFF';\n        /**\n         * AKA Specular Color in other nomenclature.\n         */\n        _this.reflectivityColor = '#FFFFFF';\n        /**\n         * Intensity of the direct lights e.g. the four lights available in scene.\n         * This impacts both the direct diffuse and specular highlights.\n         */\n        _this.directIntensity = 1;\n        /**\n         * AKA Glossiness in other nomenclature.\n         */\n        _this.microSurface = 1;\n        /**\n         * Intensity of the emissive part of the material.\n         * This helps controlling the emissive effect without modifying the emissive color.\n         */\n        _this.emissiveIntensity = 1;\n        /**\n         * Intensity of the environment e.g. how much the environment will light the object\n         * either through harmonics for rough material or through the refelction for shiny ones.\n         */\n        _this.environmentIntensity = 1;\n        /**\n         * This is a special control allowing the reduction of the specular highlights coming from the\n         * four lights of the scene. Those highlights may not be needed in full environment lighting.\n         */\n        _this.specularIntensity = 1;\n        /**\n         * Texture applied as material.\n         */\n        _this.albedoTexture = '';\n        /**\n         * Texture applied as opacity. Default: the same texture used in albedoTexture.\n         */\n        _this.alphaTexture = '';\n        /**\n         * Emissive texture.\n         */\n        _this.emissiveTexture = '';\n        /**\n         * Stores surface normal data used to displace a mesh in a texture.\n         */\n        _this.bumpTexture = '';\n        /**\n         * Stores the refracted light information in a texture.\n         */\n        _this.refractionTexture = '';\n        /**\n         * If sets to true, disables all the lights affecting the material.\n         */\n        _this.disableLighting = false;\n        /**\n         * Sets the transparency mode of the material.\n         *\n         * | Value | Type                                |\n         * | ----- | ----------------------------------- |\n         * | 0     | OPAQUE  (default)                   |\n         * | 1     | ALPHATEST                           |\n         * | 2     | ALPHABLEND                          |\n         * | 3     | ALPHATESTANDBLEND                   |\n         */\n        _this.transparencyMode = 0;\n        /**\n         * Does the albedo texture has alpha?\n         */\n        _this.hasAlpha = false;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"tag\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"alpha\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"albedoColor\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"emissiveColor\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"metallic\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"roughness\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"ambientColor\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"reflectionColor\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"reflectivityColor\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"directIntensity\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"microSurface\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"emissiveIntensity\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"environmentIntensity\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"specularIntensity\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"albedoTexture\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"alphaTexture\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"emissiveTexture\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"bumpTexture\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], Material.prototype, \"refractionTexture\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Boolean)\n    ], Material.prototype, \"disableLighting\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], Material.prototype, \"transparencyMode\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Boolean)\n    ], Material.prototype, \"hasAlpha\", void 0);\n    Material = __decorate([\n        Component_1.DisposableComponent('engine.material')\n    ], Material);\n    return Material;\n}(Component_1.ProxyComponent));\nexports.Material = Material;\n/**\n * @public\n */\nvar BasicMaterial = /** @class */ (function (_super) {\n    __extends(BasicMaterial, _super);\n    function BasicMaterial() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * @internal\n         */\n        _this.tag = 'basic-material';\n        /**\n         * The source of the texture image.\n         */\n        _this.texture = '';\n        /**\n         * A number between 0 and 1.\n         * Any pixel with an alpha lower than this value will be shown as transparent.\n         */\n        _this.alphaTest = 0.5;\n        /**\n         * Enables crisper images based on the provided sampling mode.\n         * | Value | Type      |\n         * |-------|-----------|\n         * |     1 | NEAREST   |\n         * |     2 | BILINEAR  |\n         * |     3 | TRILINEAR |\n         */\n        _this.samplingMode = 2;\n        /**\n         * Enables texture wrapping for this material.\n         * | Value | Type      |\n         * |-------|-----------|\n         * |     1 | CLAMP     |\n         * |     2 | WRAP      |\n         * |     3 | MIRROR    |\n         */\n        _this.wrap = 0;\n        return _this;\n    }\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], BasicMaterial.prototype, \"tag\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", String)\n    ], BasicMaterial.prototype, \"texture\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], BasicMaterial.prototype, \"alphaTest\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], BasicMaterial.prototype, \"samplingMode\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Number)\n    ], BasicMaterial.prototype, \"wrap\", void 0);\n    BasicMaterial = __decorate([\n        Component_1.DisposableComponent('engine.material')\n    ], BasicMaterial);\n    return BasicMaterial;\n}(Component_1.ProxyComponent));\nexports.BasicMaterial = BasicMaterial;\n/**\n * @public\n */\nvar OnClick = /** @class */ (function (_super) {\n    __extends(OnClick, _super);\n    function OnClick(callback) {\n        var _this = _super.call(this) || this;\n        _this.uuid = helpers_1.uuid();\n        _this.callback = callback;\n        return _this;\n    }\n    OnClick.prototype.toJSON = function () {\n        return this.uuid;\n    };\n    __decorate([\n        Component_1.ProxyComponent.readonly,\n        __metadata(\"design:type\", String)\n    ], OnClick.prototype, \"uuid\", void 0);\n    __decorate([\n        Component_1.ProxyComponent.field,\n        __metadata(\"design:type\", Function)\n    ], OnClick.prototype, \"callback\", void 0);\n    OnClick = __decorate([\n        Component_1.Component('engine.onClick'),\n        __metadata(\"design:paramtypes\", [Function])\n    ], OnClick);\n    return OnClick;\n}(Component_1.ProxyComponent));\nexports.OnClick = OnClick;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcG9uZW50cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWNlbnRyYWxhbmQvQ29tcG9uZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw4Q0FBaUY7QUFDakYsMENBQXFDO0FBU3JDOztHQUVHO0FBQ0g7SUFBNEIsMEJBQWM7SUFZeEMsZ0JBQVksRUFBYyxFQUFFLEVBQWMsRUFBRSxFQUFjO1FBQTlDLG1CQUFBLEVBQUEsTUFBYztRQUFFLG1CQUFBLEVBQUEsTUFBYztRQUFFLG1CQUFBLEVBQUEsTUFBYztRQUExRCxZQUNFLGlCQUFPLFNBSVI7UUFmRCxPQUFDLEdBQVcsQ0FBQyxDQUFBO1FBR2IsT0FBQyxHQUFXLENBQUMsQ0FBQTtRQUdiLE9BQUMsR0FBVyxDQUFDLENBQUE7UUFNWCxLQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtRQUNYLEtBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQ1gsS0FBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7O0lBQ2IsQ0FBQztJQWZEO1FBREMsMEJBQWMsQ0FBQyxLQUFLOztxQ0FDUjtJQUdiO1FBREMsMEJBQWMsQ0FBQyxLQUFLOztxQ0FDUjtJQUdiO1FBREMsMEJBQWMsQ0FBQyxLQUFLOztxQ0FDUjtJQVVmLGFBQUM7Q0FBQSxBQWxCRCxDQUE0QiwwQkFBYyxHQWtCekM7QUFsQlksd0JBQU07QUFvQm5COztHQUVHO0FBRUg7SUFBOEIsNEJBQU07SUFBcEM7O0lBQXNDLENBQUM7SUFBMUIsUUFBUTtRQURwQixxQkFBUyxDQUFDLGlCQUFpQixDQUFDO09BQ2hCLFFBQVEsQ0FBa0I7SUFBRCxlQUFDO0NBQUEsQUFBdkMsQ0FBOEIsTUFBTSxHQUFHO0FBQTFCLDRCQUFRO0FBRXJCOztHQUVHO0FBRUg7SUFBOEIsNEJBQU07SUFBcEM7O0lBQXNDLENBQUM7SUFBMUIsUUFBUTtRQURwQixxQkFBUyxDQUFDLGlC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REMsMEJBQWMsQ0FBQyxRQUFROzs4Q0FDTTtJQU05QjtRQURDLDBCQUFjLENBQUMsS0FBSzs7a0RBQ0Q7SUFPcEI7UUFEQywwQkFBYyxDQUFDLEtBQUs7O29EQUNFO0lBV3ZCO1FBREMsMEJBQWMsQ0FBQyxLQUFLOzt1REFDRztJQVd4QjtRQURDLDBCQUFjLENBQUMsS0FBSzs7K0NBQ0w7SUF4Q0wsYUFBYTtRQUR6QiwrQkFBbUIsQ0FBQyxpQkFBaUIsQ0FBQztPQUMxQixhQUFhLENBeUN6QjtJQUFELG9CQUFDO0NBQUEsQUF6Q0QsQ0FBbUMsMEJBQWMsR0F5Q2hEO0FBekNZLHNDQUFhO0FBMkMxQjs7R0FFRztBQUVIO0lBQTZCLDJCQUFjO0lBT3pDLGlCQUFZLFFBQXFDO1FBQWpELFlBQ0UsaUJBQU8sU0FFUjtRQVJRLFVBQUksR0FBVyxjQUFJLEVBQUUsQ0FBQTtRQU81QixLQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTs7SUFDMUIsQ0FBQztJQUVELHdCQUFNLEdBQU47UUFDRSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUE7SUFDbEIsQ0FBQztJQVpEO1FBREMsMEJBQWMsQ0FBQyxRQUFROzt5Q0FDTTtJQUc5QjtRQURDLDBCQUFjLENBQUMsS0FBSzs7NkNBQ1U7SUFMcEIsT0FBTztRQURuQixxQkFBUyxDQUFDLGdCQUFnQixDQUFDOztPQUNmLE9BQU8sQ0FlbkI7SUFBRCxjQUFDO0NBQUEsQUFmRCxDQUE2QiwwQkFBYyxHQWUxQztBQWZZLDBCQUFPIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBQcm94eUNvbXBvbmVudCwgRGlzcG9zYWJsZUNvbXBvbmVudCB9IGZyb20gJy4uL2Vjcy9Db21wb25lbnQnXG5pbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi4vZWNzL2hlbHBlcnMnXG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrRXZlbnQge1xuICBwb2ludGVySWQ6IG51bWJlclxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFZlY3RvciBleHRlbmRzIFByb3h5Q29tcG9uZW50IHtcbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHg6IG51bWJlciA9IDBcblxuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgeTogbnVtYmVyID0gMFxuXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICB6OiBudW1iZXIgPSAwXG5cbiAgY29uc3RydWN0b3IoKVxuICBjb25zdHJ1Y3RvcihfeDogbnVtYmVyLCBfeTogbnVtYmVyLCBfejogbnVtYmVyKVxuICBjb25zdHJ1Y3RvcihfeDogbnVtYmVyID0gMCwgX3k6IG51bWJlciA9IDAsIF96OiBudW1iZXIgPSAwKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMueCA9IF94XG4gICAgdGhpcy55ID0gX3lcbiAgICB0aGlzLnogPSBfelxuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUucG9zaXRpb24nKVxuZXhwb3J0IGNsYXNzIFBvc2l0aW9uIGV4dGVuZHMgVmVjdG9yIHt9XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUucm90YXRpb24nKVxuZXhwb3J0IGNsYXNzIFJvdGF0aW9uIGV4dGVuZHMgVmVjdG9yIHt9XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUuc2NhbGUnKVxuZXhwb3J0IGNsYXNzIFNjYWxlIGV4dGVuZHMgVmVjdG9yIHt9XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2hhcGUgZXh0ZW5kcyBQcm94eUNvbXBvbmVudCB7XG4gIHJlYWRvbmx5IHRhZyE6IHN0cmluZ1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gdHJ1ZSB0byB0dXJuIG9uIHRoZSBjb2xsaWRlciBmb3IgdGhlIGVudGl0eS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICB3aXRoQ29sbGlzaW9uczogYm9vbGVhbiA9IGZhbHNlXG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUuc2hhcGUnKVxuZXhwb3J0IGNsYXNzIEJveFNoYXBlIGV4dGVuZHMgU2hhcGUge1xuICBAUHJveHlDb21wb25lbnQucmVhZG9ubHlcbiAgcmVhZG9ubHkgdGFnOiBzdHJpbmcgPSAnYm94J1xufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLnNoYXBlJylcbmV4cG9ydCBjbGFzcyBTcGhlcmVTaGFwZSBleHRlbmRzIFNoYXBlIHtcbiAgQFByb3h5Q29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHRhZzogc3RyaW5nID0gJ3NwaGVyZSdcbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBDb21wb25lbnQoJ2VuZ2luZS5zaGFwZScpXG5leHBvcnQgY2xhc3MgUGxhbmVTaGFwZSBleHRlbmRzIFNoYXBlIHtcbiAgQFByb3h5Q29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHRhZzogc3RyaW5nID0gJ3BsYW5lJ1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBob3Jpem9udGFsIGxlbmd0aCBvZiB0aGUgcGxhbmUuIERlZmF1bHRzIHRvIDEuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgd2lkdGg6IG51bWJlciA9IDFcblxuICAvKipcbiAgICogU2V0cyB0aGUgdmVydGljYWwgbGVuZ3RoIG9mIHRoZSBwbGFuZS4gRGVmYXVsdHMgdG8gMS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBoZWlnaHQ6IG51bWJlciA9IDFcblxuICAvKipcbiAgICogU2V0cyB0aGUgVVYgY29vcmRpbmF0ZXMgZm9yIHRoZSBwbGFuZS5cbiAgICogVXNlZCB0byBtYXAgc3BlY2lmaWMgcGllY2VzIG9mIGEgTWF0ZXJpYWwncyB0ZXh0dXJlIGludG8gdGhlIHBsYW5lJ3MgZ2VvbWV0cnkuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgdXZzOiBudW1iZXJbXSA9IFtdXG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUuc2hhcGUnKVxuZXhwb3J0IGNsYXNzIENvbmVTaGFwZSBleHRlbmRzIFNoYXBlIHtcbiAgQFByb3h5Q29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHRhZzogc3RyaW5nID0gJ2NvbmUnXG5cbiAgLyoqXG4gICAqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiBhIHRydW5jYXRlZCBjb25lLiBEZWZhdWx0cyB0byAwLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJhZGl1c1RvcDogbnVtYmVyID0gMFxuXG4gIC8qKlxuICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBiYXNlIG9mIHRoZSBjb25lLiBEZWZhdWx0cyB0byAxLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJhZGl1c0JvdHRvbTogbnVtYmVyID0gMVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBudW1iZXIgb2YgcmluZ3MgYWxvbmcgdGhlIGNvbmUgaGVpZ2h0IChwb3NpdGl2ZSBpbnRlZ2VyKS4gRGVmYXVsdHMgdG8gMS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBzZWdtZW50c0hlaWdodDogbnVtYmVyID0gMVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBudW1iZXIgb2YgY29uZSBzaWRlcyAocG9zaXRpdmUgaW50ZWdlcikuIERlZmF1bHRzIHRvIDM2LlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHNlZ21lbnRzUmFkaWFsOiBudW1iZXIgPSAzNlxuXG4gIC8qKlxuICAgKiBBZGRzIHR3byBleHRyYSBmYWNlcyBwZXIgc3ViZGl2aXNpb24gdG8gZW5jbG9zZSB0aGUgY29uZSBhcm91bmQgaXRzIGhlaWdodCBheGlzLlxuICAgKiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBvcGVuRW5kZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSByYWRpdXMgb2YgdGhlIHRvcCBhbmQgYm90dG9tIGNhcHMgYXQgb25jZS5cbiAgICpcbiAgICogUHJvcGVydGllcyBgcmFkaXVzVG9wYCBhbmQgYHJhZGl1c0JvdHRvbWAgYXJlIHByaW9yaXRpemVkIG92ZXIgdGhpcyBvbmUuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgcmFkaXVzOiBudW1iZXIgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSByYXRpbyAobWF4IDEpIHRvIGFwcGx5IHRvIHRoZSBjaXJjdW1mZXJlbmNlIHRvIHNsaWNlIHRoZSBjb25lLiBEZWZhdWx0cyB0byAzNjAuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgYXJjOiBudW1iZXIgPSAzNjBcbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBDb21wb25lbnQoJ2VuZ2luZS5zaGFwZScpXG5leHBvcnQgY2xhc3MgQ3lsaW5kZXJTaGFwZSBleHRlbmRzIFNoYXBlIHtcbiAgQFByb3h5Q29tcG9uZW50LnJlYWRvbmx5XG4gIHJlYWRvbmx5IHRhZzogc3RyaW5nID0gJ2N5bGluZGVyJ1xuXG4gIC8qKlxuICAgKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIGN5bGluZGVyLiBEZWZhdWx0cyB0byAwLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJhZGl1c1RvcDogbnVtYmVyID0gMFxuXG4gIC8qKlxuICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBiYXNlIG9mIHRoZSBjeWxpbmRlci4gRGVmYXVsdHMgdG8gMS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICByYWRpdXNCb3R0b206IG51bWJlciA9IDFcblxuICAvKipcbiAgICogU2V0cyB0aGUgbnVtYmVyIG9mIHJpbmdzIGFsb25nIHRoZSBjeWxpbmRlciBoZWlnaHQgKHBvc2l0aXZlIGludGVnZXIpLiBEZWZhdWx0cyB0byAxLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHNlZ21lbnRzSGVpZ2h0OiBudW1iZXIgPSAxXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG51bWJlciBvZiBjeWxpbmRlciBzaWRlcyAocG9zaXRpdmUgaW50ZWdlcikuIERlZmF1bHRzIHRvIDM2LlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHNlZ21lbnRzUmFkaWFsOiBudW1iZXIgPSAzNlxuXG4gIC8qKlxuICAgKiBBZGRzIHR3byBleHRyYSBmYWNlcyBwZXIgc3ViZGl2aXNpb24gdG8gZW5jbG9zZSB0aGUgY3lsaW5kZXIgYXJvdW5kIGl0cyBoZWlnaHQgYXhpcy5cbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgb3BlbkVuZGVkOiBib29sZWFuID0gZmFsc2VcblxuICAvKipcbiAgICogU2V0cyB0aGUgcmFkaXVzIG9mIHRoZSB0b3AgYW5kIGJvdHRvbSBjYXBzIGF0IG9uY2UuXG4gICAqXG4gICAqIFByb3BlcnRpZXMgYHJhZGl1c1RvcGAgYW5kIGByYWRpdXNCb3R0b21gIGFyZSBwcmlvcml0aXplZCBvdmVyIHRoaXMgb25lLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJhZGl1czogbnVtYmVyIHwgbnVsbCA9IG51bGxcblxuICAvKipcbiAgICogU2V0cyB0aGUgcmF0aW8gKG1heCAxKSB0byBhcHBseSB0byB0aGUgY2lyY3VtZmVyZW5jZSB0byBzbGljZSB0aGUgY3lsaW5kZXIuIERlZmF1bHRzIHRvIDM2MC5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBhcmM6IG51bWJlciA9IDM2MFxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLnNoYXBlJylcbmV4cG9ydCBjbGFzcyBHTFRGU2hhcGUgZXh0ZW5kcyBTaGFwZSB7XG4gIEBQcm94eUNvbXBvbmVudC5yZWFkb25seVxuICB0YWc6IHN0cmluZyA9ICdnbHRmLW1vZGVsJ1xuXG4gIEBTaGFwZS5yZWFkb25seVxuICByZWFkb25seSBzcmMhOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihzcmM6IHN0cmluZykge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLnNyYyA9IHNyY1xuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5AQ29tcG9uZW50KCdlbmdpbmUuc2hhcGUnKVxuZXhwb3J0IGNsYXNzIE9CSlNoYXBlIGV4dGVuZHMgU2hhcGUge1xuICBAUHJveHlDb21wb25lbnQucmVhZG9ubHlcbiAgdGFnOiBzdHJpbmcgPSAnb2JqLW1vZGVsJ1xuXG4gIEBQcm94eUNvbXBvbmVudC5yZWFkb25seVxuICByZWFkb25seSBzcmMhOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihzcmM6IHN0cmluZykge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLnNyYyA9IHNyY1xuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5ARGlzcG9zYWJsZUNvbXBvbmVudCgnZW5naW5lLm1hdGVyaWFsJylcbmV4cG9ydCBjbGFzcyBNYXRlcmlhbCBleHRlbmRzIFByb3h5Q29tcG9uZW50IHtcbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LnJlYWRvbmx5XG4gIHRhZzogc3RyaW5nID0gJ21hdGVyaWFsJ1xuXG4gIC8qKlxuICAgKiBPcGFjaXR5LlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIGFscGhhOiBudW1iZXIgPSAxXG5cbiAgLyoqXG4gICAqIEFLQSBEaWZmdXNlIENvbG9yIGluIG90aGVyIG5vbWVuY2xhdHVyZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBhbGJlZG9Db2xvcjogc3RyaW5nID0gJyNDQ0NDQ0NDJ1xuXG4gIC8qKlxuICAgKiBUaGUgY29sb3IgZW1pdHRlZCBmcm9tIHRoZSBtYXRlcmlhbC5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBlbWlzc2l2ZUNvbG9yOiBzdHJpbmcgPSAnIzAwMDAwMCdcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBtZXRhbGxpYyBzY2FsYXIgb2YgdGhlIG1ldGFsbGljL3JvdWdobmVzcyB3b3JrZmxvdy5cbiAgICogQ2FuIGFsc28gYmUgdXNlZCB0byBzY2FsZSB0aGUgbWV0YWxuZXNzIHZhbHVlcyBvZiB0aGUgbWV0YWxsaWMgdGV4dHVyZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBtZXRhbGxpYzogbnVtYmVyID0gMC41XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgcm91Z2huZXNzIHNjYWxhciBvZiB0aGUgbWV0YWxsaWMvcm91Z2huZXNzIHdvcmtmbG93LlxuICAgKiBDYW4gYWxzbyBiZSB1c2VkIHRvIHNjYWxlIHRoZSByb3VnaG5lc3MgdmFsdWVzIG9mIHRoZSBtZXRhbGxpYyB0ZXh0dXJlLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJvdWdobmVzczogbnVtYmVyID0gMC41XG5cbiAgLyoqXG4gICAqIEFLQSBEaWZmdXNlIENvbG9yIGluIG90aGVyIG5vbWVuY2xhdHVyZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBhbWJpZW50Q29sb3I6IHN0cmluZyA9ICcjMDAwMDAwJ1xuXG4gIC8qKlxuICAgKiBUaGUgY29sb3IgcmVmbGVjdGVkIGZyb20gdGhlIG1hdGVyaWFsLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJlZmxlY3Rpb25Db2xvcjogc3RyaW5nID0gJyNGRkZGRkYnXG5cbiAgLyoqXG4gICAqIEFLQSBTcGVjdWxhciBDb2xvciBpbiBvdGhlciBub21lbmNsYXR1cmUuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgcmVmbGVjdGl2aXR5Q29sb3I6IHN0cmluZyA9ICcjRkZGRkZGJ1xuXG4gIC8qKlxuICAgKiBJbnRlbnNpdHkgb2YgdGhlIGRpcmVjdCBsaWdodHMgZS5nLiB0aGUgZm91ciBsaWdodHMgYXZhaWxhYmxlIGluIHNjZW5lLlxuICAgKiBUaGlzIGltcGFjdHMgYm90aCB0aGUgZGlyZWN0IGRpZmZ1c2UgYW5kIHNwZWN1bGFyIGhpZ2hsaWdodHMuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgZGlyZWN0SW50ZW5zaXR5OiBudW1iZXIgPSAxXG5cbiAgLyoqXG4gICAqIEFLQSBHbG9zc2luZXNzIGluIG90aGVyIG5vbWVuY2xhdHVyZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBtaWNyb1N1cmZhY2U6IG51bWJlciA9IDFcblxuICAvKipcbiAgICogSW50ZW5zaXR5IG9mIHRoZSBlbWlzc2l2ZSBwYXJ0IG9mIHRoZSBtYXRlcmlhbC5cbiAgICogVGhpcyBoZWxwcyBjb250cm9sbGluZyB0aGUgZW1pc3NpdmUgZWZmZWN0IHdpdGhvdXQgbW9kaWZ5aW5nIHRoZSBlbWlzc2l2ZSBjb2xvci5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBlbWlzc2l2ZUludGVuc2l0eTogbnVtYmVyID0gMVxuXG4gIC8qKlxuICAgKiBJbnRlbnNpdHkgb2YgdGhlIGVudmlyb25tZW50IGUuZy4gaG93IG11Y2ggdGhlIGVudmlyb25tZW50IHdpbGwgbGlnaHQgdGhlIG9iamVjdFxuICAgKiBlaXRoZXIgdGhyb3VnaCBoYXJtb25pY3MgZm9yIHJvdWdoIG1hdGVyaWFsIG9yIHRocm91Z2ggdGhlIHJlZmVsY3Rpb24gZm9yIHNoaW55IG9uZXMuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgZW52aXJvbm1lbnRJbnRlbnNpdHk6IG51bWJlciA9IDFcblxuICAvKipcbiAgICogVGhpcyBpcyBhIHNwZWNpYWwgY29udHJvbCBhbGxvd2luZyB0aGUgcmVkdWN0aW9uIG9mIHRoZSBzcGVjdWxhciBoaWdobGlnaHRzIGNvbWluZyBmcm9tIHRoZVxuICAgKiBmb3VyIGxpZ2h0cyBvZiB0aGUgc2NlbmUuIFRob3NlIGhpZ2hsaWdodHMgbWF5IG5vdCBiZSBuZWVkZWQgaW4gZnVsbCBlbnZpcm9ubWVudCBsaWdodGluZy5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBzcGVjdWxhckludGVuc2l0eTogbnVtYmVyID0gMVxuXG4gIC8qKlxuICAgKiBUZXh0dXJlIGFwcGxpZWQgYXMgbWF0ZXJpYWwuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgYWxiZWRvVGV4dHVyZTogc3RyaW5nID0gJydcblxuICAvKipcbiAgICogVGV4dHVyZSBhcHBsaWVkIGFzIG9wYWNpdHkuIERlZmF1bHQ6IHRoZSBzYW1lIHRleHR1cmUgdXNlZCBpbiBhbGJlZG9UZXh0dXJlLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIGFscGhhVGV4dHVyZTogc3RyaW5nID0gJydcblxuICAvKipcbiAgICogRW1pc3NpdmUgdGV4dHVyZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBlbWlzc2l2ZVRleHR1cmU6IHN0cmluZyA9ICcnXG5cbiAgLyoqXG4gICAqIFN0b3JlcyBzdXJmYWNlIG5vcm1hbCBkYXRhIHVzZWQgdG8gZGlzcGxhY2UgYSBtZXNoIGluIGEgdGV4dHVyZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBidW1wVGV4dHVyZTogc3RyaW5nID0gJydcblxuICAvKipcbiAgICogU3RvcmVzIHRoZSByZWZyYWN0ZWQgbGlnaHQgaW5mb3JtYXRpb24gaW4gYSB0ZXh0dXJlLlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHJlZnJhY3Rpb25UZXh0dXJlOiBzdHJpbmcgPSAnJ1xuXG4gIC8qKlxuICAgKiBJZiBzZXRzIHRvIHRydWUsIGRpc2FibGVzIGFsbCB0aGUgbGlnaHRzIGFmZmVjdGluZyB0aGUgbWF0ZXJpYWwuXG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgZGlzYWJsZUxpZ2h0aW5nOiBib29sZWFuID0gZmFsc2VcblxuICAvKipcbiAgICogU2V0cyB0aGUgdHJhbnNwYXJlbmN5IG1vZGUgb2YgdGhlIG1hdGVyaWFsLlxuICAgKlxuICAgKiB8IFZhbHVlIHwgVHlwZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IC0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfFxuICAgKiB8IDAgICAgIHwgT1BBUVVFICAoZGVmYXVsdCkgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IDEgICAgIHwgQUxQSEFURVNUICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IDIgICAgIHwgQUxQSEFCTEVORCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IDMgICAgIHwgQUxQSEFURVNUQU5EQkxFTkQgICAgICAgICAgICAgICAgICAgfFxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIHRyYW5zcGFyZW5jeU1vZGU6IG51bWJlciA9IDBcblxuICAvKipcbiAgICogRG9lcyB0aGUgYWxiZWRvIHRleHR1cmUgaGFzIGFscGhhP1xuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIGhhc0FscGhhOiBib29sZWFuID0gZmFsc2Vcbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBEaXNwb3NhYmxlQ29tcG9uZW50KCdlbmdpbmUubWF0ZXJpYWwnKVxuZXhwb3J0IGNsYXNzIEJhc2ljTWF0ZXJpYWwgZXh0ZW5kcyBQcm94eUNvbXBvbmVudCB7XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5yZWFkb25seVxuICB0YWc6IHN0cmluZyA9ICdiYXNpYy1tYXRlcmlhbCdcblxuICAvKipcbiAgICogVGhlIHNvdXJjZSBvZiB0aGUgdGV4dHVyZSBpbWFnZS5cbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICB0ZXh0dXJlOiBzdHJpbmcgPSAnJ1xuXG4gIC8qKlxuICAgKiBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuXG4gICAqIEFueSBwaXhlbCB3aXRoIGFuIGFscGhhIGxvd2VyIHRoYW4gdGhpcyB2YWx1ZSB3aWxsIGJlIHNob3duIGFzIHRyYW5zcGFyZW50LlxuICAgKi9cbiAgQFByb3h5Q29tcG9uZW50LmZpZWxkXG4gIGFscGhhVGVzdDogbnVtYmVyID0gMC41XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgY3Jpc3BlciBpbWFnZXMgYmFzZWQgb24gdGhlIHByb3ZpZGVkIHNhbXBsaW5nIG1vZGUuXG4gICAqIHwgVmFsdWUgfCBUeXBlICAgICAgfFxuICAgKiB8LS0tLS0tLXwtLS0tLS0tLS0tLXxcbiAgICogfCAgICAgMSB8IE5FQVJFU1QgICB8XG4gICAqIHwgICAgIDIgfCBCSUxJTkVBUiAgfFxuICAgKiB8ICAgICAzIHwgVFJJTElORUFSIHxcbiAgICovXG4gIEBQcm94eUNvbXBvbmVudC5maWVsZFxuICBzYW1wbGluZ01vZGU6IG51bWJlciA9IDJcblxuICAvKipcbiAgICogRW5hYmxlcyB0ZXh0dXJlIHdyYXBwaW5nIGZvciB0aGlzIG1hdGVyaWFsLlxuICAgKiB8IFZhbHVlIHwgVHlwZSAgICAgIHxcbiAgICogfC0tLS0tLS18LS0tLS0tLS0tLS18XG4gICAqIHwgICAgIDEgfCBDTEFNUCAgICAgfFxuICAgKiB8ICAgICAyIHwgV1JBUCAgICAgIHxcbiAgICogfCAgICAgMyB8IE1JUlJPUiAgICB8XG4gICAqL1xuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgd3JhcDogbnVtYmVyID0gMFxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQENvbXBvbmVudCgnZW5naW5lLm9uQ2xpY2snKVxuZXhwb3J0IGNsYXNzIE9uQ2xpY2sgZXh0ZW5kcyBQcm94eUNvbXBvbmVudCB7XG4gIEBQcm94eUNvbXBvbmVudC5yZWFkb25seVxuICByZWFkb25seSB1dWlkOiBzdHJpbmcgPSB1dWlkKClcblxuICBAUHJveHlDb21wb25lbnQuZmllbGRcbiAgY2FsbGJhY2shOiAoZXZlbnQ6IGFueSkgPT4gdm9pZFxuXG4gIGNvbnN0cnVjdG9yKGNhbGxiYWNrOiAoZXZlbnQ6IENsaWNrRXZlbnQpID0+IHZvaWQpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudXVpZFxuICB9XG59XG4iXX0=\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/decentraland/Components.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/decentraland/Events.ts":
    /*!**************************************************************!*\
      !*** ./packages/decentraland-ecs/src/decentraland/Events.ts ***!
      \**************************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventManager_1 = __webpack_require__(/*! ../ecs/EventManager */ \"./packages/decentraland-ecs/src/ecs/EventManager.ts\");\n/**\n * @public\n */\nvar UUIDEvent = /** @class */ (function () {\n    function UUIDEvent() {\n    }\n    UUIDEvent = __decorate([\n        EventManager_1.EventConstructor('uuidEvent')\n    ], UUIDEvent);\n    return UUIDEvent;\n}());\nexports.UUIDEvent = UUIDEvent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXZlbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2RlY2VudHJhbGFuZC9FdmVudHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxvREFBc0Q7QUFFdEQ7O0dBRUc7QUFFSDtJQUFBO0lBR0EsQ0FBQztJQUhZLFNBQVM7UUFEckIsK0JBQWdCLENBQUMsV0FBVyxDQUFDO09BQ2pCLFNBQVMsQ0FHckI7SUFBRCxnQkFBQztDQUFBLEFBSEQsSUFHQztBQUhZLDhCQUFTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRDb25zdHJ1Y3RvciB9IGZyb20gJy4uL2Vjcy9FdmVudE1hbmFnZXInXG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5ARXZlbnRDb25zdHJ1Y3RvcigndXVpZEV2ZW50JylcbmV4cG9ydCBjbGFzcyBVVUlERXZlbnQ8VCA9IGFueT4ge1xuICB1dWlkITogc3RyaW5nXG4gIHBheWxvYWQhOiBUXG59XG4iXX0=\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/decentraland/Events.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/decentraland/Implementation.ts":
    /*!**********************************************************************!*\
      !*** ./packages/decentraland-ecs/src/decentraland/Implementation.ts ***!
      \**********************************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar System_1 = __webpack_require__(/*! ../ecs/System */ \"./packages/decentraland-ecs/src/ecs/System.ts\");\nvar Engine_1 = __webpack_require__(/*! ../ecs/Engine */ \"./packages/decentraland-ecs/src/ecs/Engine.ts\");\nvar Entity_1 = __webpack_require__(/*! ../ecs/Entity */ \"./packages/decentraland-ecs/src/ecs/Entity.ts\");\nvar Events_1 = __webpack_require__(/*! ./Events */ \"./packages/decentraland-ecs/src/decentraland/Events.ts\");\nvar Component_1 = __webpack_require__(/*! ../ecs/Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\");\nvar DecentralandSynchronizationSystem = /** @class */ (function (_super) {\n    __extends(DecentralandSynchronizationSystem, _super);\n    function DecentralandSynchronizationSystem(dcl) {\n        var _this = _super.call(this) || this;\n        _this.dcl = dcl;\n        _this.cachedComponents = {};\n        return _this;\n    }\n    DecentralandSynchronizationSystem.prototype.activate = function (engine) {\n        var _this = this;\n        engine.eventManager.addListener(Entity_1.ComponentAdded, this, this.componentAdded);\n        engine.eventManager.addListener(Entity_1.ComponentRemoved, this, this.componentRemoved);\n        engine.eventManager.addListener(Component_1.DisposableComponentCreated, this, this.disposableComponentCreated);\n        engine.eventManager.addListener(Component_1.DisposableComponentRemoved, this, this.disposableComponentRemoved);\n        engine.eventManager.addListener(Component_1.DisposableComponentUpdated, this, this.disposableComponentUpdated);\n        var rootId = engine.rootEntity.engineId;\n        if (rootId !== null) {\n            this.dcl.addEntity(rootId);\n        }\n        // TODO(agus): send disposableComponents maybe?\n        // TODO: Move this to Systems.ts\n        this.dcl.subscribe('uuidEvent');\n        this.dcl.onUpdate(function (dt) {\n            engine.update(dt);\n            _this.presentEntities();\n        });\n        this.dcl.onEvent(function (event) {\n            switch (event.type) {\n                case 'uuidEvent':\n                    var e = new Events_1.UUIDEvent();\n                    e.uuid = event.data.uuid;\n                    e.payload = event.data.payload;\n                    engine.eventManager.fireEvent(e);\n                    break;\n                default:\n                    engine.eventManager.fireEvent(new Engine_1.EngineEvent(event));\n                    break;\n            }\n        });\n    };\n    DecentralandSynchronizationSystem.prototype.onAddEntity = function (entity) {\n        var id = entity.engineId;\n        if (id) {\n            this.dcl.addEntity(id);\n            if (entity.parent && entity.parent.engineId !== null) {\n                this.dcl.setParent(id, entity.parent.engineId);\n            }\n            var generated = JSON.stringify(this.generateEntityUpdate(entity));\n            // TODO(agus): why do we need to send a copy?\n            this.dcl.updateEntity(id, JSON.parse(generated));\n        }\n    };\n    DecentralandSynchronizationSystem.prototype.onRemoveEntity = function (entity) {\n        var entityId = entity.engineId;\n        if (entityId) {\n            delete this.cachedComponents[entityId];\n            this.dcl.removeEntity(entityId);\n        }\n    };\n    DecentralandSynchronizationSystem.prototype.presentEntities = function () {\n        for (var i in this.entities) {\n            var entity = this.entities[i];\n            var entityId = entity.engineId;\n            if (entityId) {\n                var generated = JSON.stringify(this.generateEntityUpdate(entity));\n                if (this.cachedComponents[entityId] !== generated) {\n                    this.cachedComponents[entityId] = generated;\n                    // TODO(agus): why do we need to send a copy?\n                    this.dcl.updateEntity(entityId, JSON.parse(generated));\n                }\n            }\n        }\n    };\n    DecentralandSynchronizationSystem.prototype.generateEntityUpdate = function (entity) {\n        var raw = {};\n        for (var k in entity.components) {\n            var component = entity.components[k];\n            if (Component_1.isDisposableComponent(component)) {\n                raw[k] = { $ref: Component_1.getComponentId(component) };\n            }\n            else {\n                raw[k] = component;\n            }\n        }\n        return raw;\n    };\n    DecentralandSynchronizationSystem.prototype.componentAdded = function (event) {\n        var entity = event.entity, componentName = event.componentName;\n        if (entity.engineId) {\n            this.dcl.componentAdded(entity.engineId, componentName, JSON.parse(JSON.stringify(entity.get(componentName))));\n        }\n    };\n    DecentralandSynchronizationSystem.prototype.componentRemoved = function (event) {\n        var entity = event.entity, componentName = event.componentName;\n        if (entity.engineId) {\n            this.dcl.componentRemoved(entity.engineId, componentName);\n        }\n    };\n    DecentralandSynchronizationSystem.prototype.disposableComponentCreated = function (event) {\n        this.dcl.componentCreated(event.componentId, event.componentName);\n    };\n    DecentralandSynchronizationSystem.prototype.disposableComponentRemoved = function (event) {\n        this.dcl.componentDisposed(event.componentId);\n    };\n    DecentralandSynchronizationSystem.prototype.disposableComponentUpdated = function (event) {\n        this.dcl.componentUpdated(event.componentId, event.component);\n    };\n    return DecentralandSynchronizationSystem;\n}(System_1.System));\nexports.DecentralandSynchronizationSystem = DecentralandSynchronizationSystem;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1wbGVtZW50YXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVjZW50cmFsYW5kL0ltcGxlbWVudGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHdDQUFzQztBQUN0Qyx3Q0FBbUQ7QUFDbkQsd0NBQXdFO0FBQ3hFLG1DQUFvQztBQUNwQyw4Q0FPeUI7QUFJekI7SUFBdUQscURBQU07SUFHM0QsMkNBQW1CLEdBQTBCO1FBQTdDLFlBQ0UsaUJBQU8sU0FDUjtRQUZrQixTQUFHLEdBQUgsR0FBRyxDQUF1QjtRQUY3QyxzQkFBZ0IsR0FBMkIsRUFBRSxDQUFBOztJQUk3QyxDQUFDO0lBRUQsb0RBQVEsR0FBUixVQUFTLE1BQWM7UUFBdkIsaUJBcUNDO1FBcENDLE1BQU0sQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLHVCQUFjLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUMxRSxNQUFNLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyx5QkFBZ0IsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUE7UUFDOUUsTUFBTSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsc0NBQTBCLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO1FBQ2xHLE1BQU0sQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLHNDQUEwQixFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtRQUNsRyxNQUFNLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxzQ0FBMEIsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUE7UUFFbEcsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUE7UUFFekMsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFO1lBQ25CLElBQUksQ0FBQyxH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QzFEO0lBQ0gsQ0FBQztJQUVPLHNFQUEwQixHQUFsQyxVQUFtQyxLQUFpQztRQUNsRSxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0lBQ25FLENBQUM7SUFFTyxzRUFBMEIsR0FBbEMsVUFBbUMsS0FBaUM7UUFDbEUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVPLHNFQUEwQixHQUFsQyxVQUFtQyxLQUFpQztRQUNsRSxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQy9ELENBQUM7SUFDSCx3Q0FBQztBQUFELENBQUMsQUFsSUQsQ0FBdUQsZUFBTSxHQWtJNUQ7QUFsSVksOEVBQWlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSAnLi4vZWNzL1N5c3RlbSdcbmltcG9ydCB7IEVuZ2luZSwgRW5naW5lRXZlbnQgfSBmcm9tICcuLi9lY3MvRW5naW5lJ1xuaW1wb3J0IHsgRW50aXR5LCBDb21wb25lbnRBZGRlZCwgQ29tcG9uZW50UmVtb3ZlZCB9IGZyb20gJy4uL2Vjcy9FbnRpdHknXG5pbXBvcnQgeyBVVUlERXZlbnQgfSBmcm9tICcuL0V2ZW50cydcbmltcG9ydCB7XG4gIERpc3Bvc2FibGVDb21wb25lbnRDcmVhdGVkLFxuICBEaXNwb3NhYmxlQ29tcG9uZW50UmVtb3ZlZCxcbiAgRGlzcG9zYWJsZUNvbXBvbmVudFVwZGF0ZWQsXG4gIGlzRGlzcG9zYWJsZUNvbXBvbmVudCxcbiAgQ29tcG9uZW50TGlrZSxcbiAgZ2V0Q29tcG9uZW50SWRcbn0gZnJvbSAnLi4vZWNzL0NvbXBvbmVudCdcblxuaW1wb3J0IHsgRGVjZW50cmFsYW5kSW50ZXJmYWNlIH0gZnJvbSAnLi9UeXBlcydcblxuZXhwb3J0IGNsYXNzIERlY2VudHJhbGFuZFN5bmNocm9uaXphdGlvblN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XG4gIGNhY2hlZENvbXBvbmVudHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBkY2w6IERlY2VudHJhbGFuZEludGVyZmFjZSkge1xuICAgIHN1cGVyKClcbiAgfVxuXG4gIGFjdGl2YXRlKGVuZ2luZTogRW5naW5lKSB7XG4gICAgZW5naW5lLmV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcihDb21wb25lbnRBZGRlZCwgdGhpcywgdGhpcy5jb21wb25lbnRBZGRlZClcbiAgICBlbmdpbmUuZXZlbnRNYW5hZ2VyLmFkZExpc3RlbmVyKENvbXBvbmVudFJlbW92ZWQsIHRoaXMsIHRoaXMuY29tcG9uZW50UmVtb3ZlZClcbiAgICBlbmdpbmUuZXZlbnRNYW5hZ2VyLmFkZExpc3RlbmVyKERpc3Bvc2FibGVDb21wb25lbnRDcmVhdGVkLCB0aGlzLCB0aGlzLmRpc3Bvc2FibGVDb21wb25lbnRDcmVhdGVkKVxuICAgIGVuZ2luZS5ldmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoRGlzcG9zYWJsZUNvbXBvbmVudFJlbW92ZWQsIHRoaXMsIHRoaXMuZGlzcG9zYWJsZUNvbXBvbmVudFJlbW92ZWQpXG4gICAgZW5naW5lLmV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcihEaXNwb3NhYmxlQ29tcG9uZW50VXBkYXRlZCwgdGhpcywgdGhpcy5kaXNwb3NhYmxlQ29tcG9uZW50VXBkYXRlZClcblxuICAgIGNvbnN0IHJvb3RJZCA9IGVuZ2luZS5yb290RW50aXR5LmVuZ2luZUlkXG5cbiAgICBpZiAocm9vdElkICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmRjbC5hZGRFbnRpdHkocm9vdElkKVxuICAgIH1cblxuICAgIC8vIFRPRE8oYWd1cyk6IHNlbmQgZGlzcG9zYWJsZUNvbXBvbmVudHMgbWF5YmU/XG5cbiAgICAvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gU3lzdGVtcy50c1xuICAgIHRoaXMuZGNsLnN1YnNjcmliZSgndXVpZEV2ZW50JylcblxuICAgIHRoaXMuZGNsLm9uVXBkYXRlKGR0ID0+IHtcbiAgICAgIGVuZ2luZS51cGRhdGUoZHQpXG4gICAgICB0aGlzLnByZXNlbnRFbnRpdGllcygpXG4gICAgfSlcblxuICAgIHRoaXMuZGNsLm9uRXZlbnQoZXZlbnQgPT4ge1xuICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3V1aWRFdmVudCc6XG4gICAgICAgICAgY29uc3QgZSA9IG5ldyBVVUlERXZlbnQoKVxuICAgICAgICAgIGUudXVpZCA9IGV2ZW50LmRhdGEudXVpZFxuICAgICAgICAgIGUucGF5bG9hZCA9IGV2ZW50LmRhdGEucGF5bG9hZFxuICAgICAgICAgIGVuZ2luZS5ldmVudE1hbmFnZXIuZmlyZUV2ZW50KGUpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGVuZ2luZS5ldmVudE1hbmFnZXIuZmlyZUV2ZW50KG5ldyBFbmdpbmVFdmVudChldmVudCkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb25BZGRFbnRpdHkoZW50aXR5OiBFbnRpdHkpIHtcbiAgICBjb25zdCBpZCA9IGVudGl0eS5lbmdpbmVJZFxuICAgIGlmIChpZCkge1xuICAgICAgdGhpcy5kY2wuYWRkRW50aXR5KGlkKVxuXG4gICAgICBpZiAoZW50aXR5LnBhcmVudCAmJiBlbnRpdHkucGFyZW50LmVuZ2luZUlkICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZGNsLnNldFBhcmVudChpZCwgZW50aXR5LnBhcmVudC5lbmdpbmVJZClcbiAgICAgIH1cblxuICAgICAgY29uc3QgZ2VuZXJhdGVkID0gSlNPTi5zdHJpbmdpZnkodGhpcy5nZW5lcmF0ZUVudGl0eVVwZGF0ZShlbnRpdHkpKVxuXG4gICAgICAvLyBUT0RPKGFndXMpOiB3aHkgZG8gd2UgbmVlZCB0byBzZW5kIGEgY29weT9cbiAgICAgIHRoaXMuZGNsLnVwZGF0ZUVudGl0eShpZCwgSlNPTi5wYXJzZShnZW5lcmF0ZWQpKVxuICAgIH1cbiAgfVxuXG4gIG9uUmVtb3ZlRW50aXR5KGVudGl0eTogRW50aXR5KSB7XG4gICAgY29uc3QgZW50aXR5SWQgPSBlbnRpdHkuZW5naW5lSWRcbiAgICBpZiAoZW50aXR5SWQpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlZENvbXBvbmVudHNbZW50aXR5SWRdXG4gICAgICB0aGlzLmRjbC5yZW1vdmVFbnRpdHkoZW50aXR5SWQpXG4gICAgfVxuICB9XG5cbiAgcHJlc2VudEVudGl0aWVzKCkge1xuICAgIGZvciAobGV0IGkgaW4gdGhpcy5lbnRpdGllcykge1xuICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5lbnRpdGllc1tpXVxuICAgICAgY29uc3QgZW50aXR5SWQgPSBlbnRpdHkuZW5naW5lSWRcbiAgICAgIGlmIChlbnRpdHlJZCkge1xuICAgICAgICBjb25zdCBnZW5lcmF0ZWQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmdlbmVyYXRlRW50aXR5VXBkYXRlKGVudGl0eSkpXG5cbiAgICAgICAgaWYgKHRoaXMuY2FjaGVkQ29tcG9uZW50c1tlbnRpdHlJZF0gIT09IGdlbmVyYXRlZCkge1xuICAgICAgICAgIHRoaXMuY2FjaGVkQ29tcG9uZW50c1tlbnRpdHlJZF0gPSBnZW5lcmF0ZWRcblxuICAgICAgICAgIC8vIFRPRE8oYWd1cyk6IHdoeSBkbyB3ZSBuZWVkIHRvIHNlbmQgYSBjb3B5P1xuICAgICAgICAgIHRoaXMuZGNsLnVwZGF0ZUVudGl0eShlbnRpdHlJZCwgSlNPTi5wYXJzZShnZW5lcmF0ZWQpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUVudGl0eVVwZGF0ZShlbnRpdHk6IEVudGl0eSkge1xuICAgIGNvbnN0IHJhdzogUmVjb3JkPHN0cmluZywgQ29tcG9uZW50TGlrZSB8IHsgJHJlZjogc3RyaW5nIH0+ID0ge31cblxuICAgIGZvciAobGV0IGsgaW4gZW50aXR5LmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGVudGl0eS5jb21wb25lbnRzW2tdIGFzIENvbXBvbmVudExpa2VcblxuICAgICAgaWYgKGlzRGlzcG9zYWJsZUNvbXBvbmVudChjb21wb25lbnQpKSB7XG4gICAgICAgIHJhd1trXSA9IHsgJHJlZjogZ2V0Q29tcG9uZW50SWQoY29tcG9uZW50KSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYXdba10gPSBjb21wb25lbnRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmF3XG4gIH1cblxuICBwcml2YXRlIGNvbXBvbmVudEFkZGVkKGV2ZW50OiBDb21wb25lbnRBZGRlZCkge1xuICAgIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnROYW1lIH0gPSBldmVudFxuXG4gICAgaWYgKGVudGl0eS5lbmdpbmVJZCkge1xuICAgICAgdGhpcy5kY2wuY29tcG9uZW50QWRkZWQoZW50aXR5LmVuZ2luZUlkLCBjb21wb25lbnROYW1lLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVudGl0eS5nZXQoY29tcG9uZW50TmFtZSkpKSlcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBvbmVudFJlbW92ZWQoZXZlbnQ6IENvbXBvbmVudFJlbW92ZWQpIHtcbiAgICBjb25zdCB7IGVudGl0eSwgY29tcG9uZW50TmFtZSB9ID0gZXZlbnRcblxuICAgIGlmIChlbnRpdHkuZW5naW5lSWQpIHtcbiAgICAgIHRoaXMuZGNsLmNvbXBvbmVudFJlbW92ZWQoZW50aXR5LmVuZ2luZUlkLCBjb21wb25lbnROYW1lKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzcG9zYWJsZUNvbXBvbmVudENyZWF0ZWQoZXZlbnQ6IERpc3Bvc2FibGVDb21wb25lbnRDcmVhdGVkKSB7XG4gICAgdGhpcy5kY2wuY29tcG9uZW50Q3JlYXRlZChldmVudC5jb21wb25lbnRJZCwgZXZlbnQuY29tcG9uZW50TmFtZSlcbiAgfVxuXG4gIHByaXZhdGUgZGlzcG9zYWJsZUNvbXBvbmVudFJlbW92ZWQoZXZlbnQ6IERpc3Bvc2FibGVDb21wb25lbnRSZW1vdmVkKSB7XG4gICAgdGhpcy5kY2wuY29tcG9uZW50RGlzcG9zZWQoZXZlbnQuY29tcG9uZW50SWQpXG4gIH1cblxuICBwcml2YXRlIGRpc3Bvc2FibGVDb21wb25lbnRVcGRhdGVkKGV2ZW50OiBEaXNwb3NhYmxlQ29tcG9uZW50VXBkYXRlZCkge1xuICAgIHRoaXMuZGNsLmNvbXBvbmVudFVwZGF0ZWQoZXZlbnQuY29tcG9uZW50SWQsIGV2ZW50LmNvbXBvbmVudClcbiAgfVxufVxuIl19\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/decentraland/Implementation.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/decentraland/Systems.ts":
    /*!***************************************************************!*\
      !*** ./packages/decentraland-ecs/src/decentraland/Systems.ts ***!
      \***************************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar System_1 = __webpack_require__(/*! ../ecs/System */ \"./packages/decentraland-ecs/src/ecs/System.ts\");\nvar Components_1 = __webpack_require__(/*! ./Components */ \"./packages/decentraland-ecs/src/decentraland/Components.ts\");\nvar Events_1 = __webpack_require__(/*! ./Events */ \"./packages/decentraland-ecs/src/decentraland/Events.ts\");\n/**\n * @public\n */\nvar OnClickSystem = /** @class */ (function (_super) {\n    __extends(OnClickSystem, _super);\n    function OnClickSystem() {\n        return _super.call(this, Components_1.OnClick) || this;\n    }\n    OnClickSystem.prototype.activate = function (engine) {\n        engine.eventManager.addListener(Events_1.UUIDEvent, this, this.handleEvent);\n    };\n    OnClickSystem.prototype.handleEvent = function (event) {\n        for (var i in this.entities) {\n            var component = this.entities[i].getOrNull(Components_1.OnClick);\n            if (component && component.uuid === event.uuid) {\n                component.callback(event.payload);\n            }\n        }\n    };\n    return OnClickSystem;\n}(System_1.ComponentSystem));\nexports.OnClickSystem = OnClickSystem;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3lzdGVtcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWNlbnRyYWxhbmQvU3lzdGVtcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSx3Q0FBK0M7QUFFL0MsMkNBQXNDO0FBQ3RDLG1DQUFvQztBQUVwQzs7R0FFRztBQUNIO0lBQW1DLGlDQUFlO0lBQ2hEO2VBQ0Usa0JBQU0sb0JBQU8sQ0FBQztJQUNoQixDQUFDO0lBRUQsZ0NBQVEsR0FBUixVQUFTLE1BQWM7UUFDckIsTUFBTSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsa0JBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO0lBQ3BFLENBQUM7SUFFTyxtQ0FBVyxHQUFuQixVQUFvQixLQUFnQjtRQUNsQyxLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDM0IsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsb0JBQU8sQ0FBQyxDQUFBO1lBQ3JELElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxJQUFJLEtBQUssS0FBSyxDQUFDLElBQUksRUFBRTtnQkFDOUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7YUFDbEM7U0FDRjtJQUNILENBQUM7SUFDSCxvQkFBQztBQUFELENBQUMsQUFqQkQsQ0FBbUMsd0JBQWUsR0FpQmpEO0FBakJZLHNDQUFhIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50U3lzdGVtIH0gZnJvbSAnLi4vZWNzL1N5c3RlbSdcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4uL2Vjcy9FbmdpbmUnXG5pbXBvcnQgeyBPbkNsaWNrIH0gZnJvbSAnLi9Db21wb25lbnRzJ1xuaW1wb3J0IHsgVVVJREV2ZW50IH0gZnJvbSAnLi9FdmVudHMnXG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgT25DbGlja1N5c3RlbSBleHRlbmRzIENvbXBvbmVudFN5c3RlbSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKE9uQ2xpY2spXG4gIH1cblxuICBhY3RpdmF0ZShlbmdpbmU6IEVuZ2luZSkge1xuICAgIGVuZ2luZS5ldmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoVVVJREV2ZW50LCB0aGlzLCB0aGlzLmhhbmRsZUV2ZW50KVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVFdmVudChldmVudDogVVVJREV2ZW50KSB7XG4gICAgZm9yIChsZXQgaSBpbiB0aGlzLmVudGl0aWVzKSB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLmVudGl0aWVzW2ldLmdldE9yTnVsbChPbkNsaWNrKVxuICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQudXVpZCA9PT0gZXZlbnQudXVpZCkge1xuICAgICAgICBjb21wb25lbnQuY2FsbGJhY2soZXZlbnQucGF5bG9hZClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/decentraland/Systems.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/ecs/Component.ts":
    /*!********************************************************!*\
      !*** ./packages/decentraland-ecs/src/ecs/Component.ts ***!
      \********************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar helpers_1 = __webpack_require__(/*! ./helpers */ \"./packages/decentraland-ecs/src/ecs/helpers.ts\");\nvar EventManager_1 = __webpack_require__(/*! ./EventManager */ \"./packages/decentraland-ecs/src/ecs/EventManager.ts\");\nvar componentSymbol = '__name__symbol_';\nvar componentIdSymbol = '__component__id_';\n/**\n * @public\n */\nvar DisposableComponentCreated = /** @class */ (function () {\n    function DisposableComponentCreated(componentId, componentName) {\n        this.componentId = componentId;\n        this.componentName = componentName;\n        // stub\n    }\n    DisposableComponentCreated = __decorate([\n        EventManager_1.EventConstructor('dcl-disposable-component-created'),\n        __metadata(\"design:paramtypes\", [String, String])\n    ], DisposableComponentCreated);\n    return DisposableComponentCreated;\n}());\nexports.DisposableComponentCreated = DisposableComponentCreated;\n/**\n * @public\n */\nvar DisposableComponentRemoved = /** @class */ (function () {\n    function DisposableComponentRemoved(componentId) {\n        this.componentId = componentId;\n        // stub\n    }\n    DisposableComponentRemoved = __decorate([\n        EventManager_1.EventConstructor('dcl-disposable-component-removed'),\n        __metadata(\"design:paramtypes\", [String])\n    ], DisposableComponentRemoved);\n    return DisposableComponentRemoved;\n}());\nexports.DisposableComponentRemoved = DisposableComponentRemoved;\n/**\n * @public\n */\nvar DisposableComponentUpdated = /** @class */ (function () {\n    function DisposableComponentUpdated(componentId, component) {\n        this.componentId = componentId;\n        this.component = component;\n        // stub\n    }\n    DisposableComponentUpdated = __decorate([\n        EventManager_1.EventConstructor('dcl-disposable-component-updated'),\n        __metadata(\"design:paramtypes\", [String, Object])\n    ], DisposableComponentUpdated);\n    return DisposableComponentUpdated;\n}());\nexports.DisposableComponentUpdated = DisposableComponentUpdated;\n/**\n * @public\n */\nfunction Component(componentName) {\n    return function (target) {\n        if (target.isComponent) {\n            throw new TypeError(\"You cannot extend a component. Trying to extend \" + target.originalClassName + \" with: \" + componentName);\n        }\n        var extendedClass = target;\n        var RegisteredComponent = function RegisteredComponent() {\n            var ret = new (extendedClass.bind.apply(extendedClass, __spread([void 0], arguments)))();\n            Object.defineProperty(ret, componentSymbol, {\n                enumerable: false,\n                writable: false,\n                configurable: false,\n                value: componentName\n            });\n            return ret;\n        };\n        RegisteredComponent[componentSymbol] = componentName;\n        RegisteredComponent.isComponent = true;\n        RegisteredComponent.originalClassName = componentName;\n        return RegisteredComponent;\n    };\n}\nexports.Component = Component;\n/**\n * @public\n */\nfunction DisposableComponent(componentName) {\n    return function (target) {\n        if (target.isComponent) {\n            throw new TypeError(\"You cannot extend a component. Trying to extend \" + target.originalClassName + \" with: \" + componentName);\n        }\n        var extendedClass = target;\n        var RegisteredComponent = function RegisteredComponent() {\n            if (!DisposableComponent.engine) {\n                throw new Error('You need to set a DisposableComponent.engine before creating disposable components');\n            }\n            var ret = new (extendedClass.bind.apply(extendedClass, __spread([void 0], arguments)))();\n            var id = helpers_1.uuid();\n            Object.defineProperty(ret, componentSymbol, {\n                enumerable: false,\n                writable: false,\n                configurable: false,\n                value: componentName\n            });\n            Object.defineProperty(ret, componentIdSymbol, {\n                enumerable: false,\n                writable: false,\n                configurable: false,\n                value: id\n            });\n            if (DisposableComponent.engine) {\n                DisposableComponent.engine.registerComponent(ret);\n            }\n            return ret;\n        };\n        RegisteredComponent[componentSymbol] = componentName;\n        RegisteredComponent.isComponent = true;\n        RegisteredComponent.isDisposableComponent = true;\n        RegisteredComponent.originalClassName = componentName;\n        return RegisteredComponent;\n    };\n}\nexports.DisposableComponent = DisposableComponent;\n/** @internal */\n(function (DisposableComponent) {\n    /** @internal */\n    // tslint:disable-next-line:whitespace\n    DisposableComponent.engine = null;\n})(DisposableComponent = exports.DisposableComponent || (exports.DisposableComponent = {}));\n/**\n * @public\n */\nfunction getComponentName(component) {\n    if (!component) {\n        throw new TypeError(component + ' is not a component.');\n    }\n    if (component[componentSymbol]) {\n        return component[componentSymbol];\n    }\n    throw new TypeError(component + ' is not a registered component.');\n}\nexports.getComponentName = getComponentName;\n/**\n * @public\n */\nfunction getComponentId(component) {\n    if (!component) {\n        throw new TypeError(component + ' is not a component.');\n    }\n    if (component[componentIdSymbol]) {\n        return component[componentIdSymbol];\n    }\n    throw new TypeError(component + ' is not a registered component.');\n}\nexports.getComponentId = getComponentId;\n/**\n * @public\n */\nvar ProxyComponent = /** @class */ (function () {\n    function ProxyComponent() {\n        this.dirty = false;\n        this.data = {};\n    }\n    ProxyComponent.field = function (target, propertyKey) {\n        if (delete target[propertyKey]) {\n            Object.defineProperty(target, propertyKey.toString(), {\n                get: function () {\n                    return this.data[propertyKey];\n                },\n                set: function (value) {\n                    if (value !== this.data[propertyKey]) {\n                        this.dirty = true;\n                        this.data[propertyKey] = value;\n                    }\n                },\n                enumerable: true\n            });\n        }\n    };\n    ProxyComponent.readonly = function (target, propertyKey) {\n        if (delete target[propertyKey]) {\n            Object.defineProperty(target, propertyKey.toString(), {\n                get: function () {\n                    if (propertyKey in this.data === false) {\n                        throw new Error(\"The field \" + propertyKey + \" is uninitialized\");\n                    }\n                    return this.data[propertyKey];\n                },\n                set: function (value) {\n                    if (propertyKey in this.data) {\n                        throw new Error(\"The field \" + propertyKey + \" is readonly\");\n                    }\n                    this.data[propertyKey] = value;\n                },\n                enumerable: true,\n                configurable: false\n            });\n        }\n    };\n    ProxyComponent.prototype.toJSON = function () {\n        return this.data;\n    };\n    return ProxyComponent;\n}());\nexports.ProxyComponent = ProxyComponent;\n/**\n * @public\n */\nfunction isDisposableComponent(component) {\n    return componentIdSymbol in component;\n}\nexports.isDisposableComponent = isDisposableComponent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Vjcy9Db21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHFDQUFnQztBQUNoQywrQ0FBaUQ7QUFFakQsSUFBTSxlQUFlLEdBQUcsaUJBQWlCLENBQUE7QUFDekMsSUFBTSxpQkFBaUIsR0FBRyxrQkFBa0IsQ0FBQTtBQTBDNUM7O0dBRUc7QUFFSDtJQUNFLG9DQUFtQixXQUFtQixFQUFTLGFBQXFCO1FBQWpELGdCQUFXLEdBQVgsV0FBVyxDQUFRO1FBQVMsa0JBQWEsR0FBYixhQUFhLENBQVE7UUFDbEUsT0FBTztJQUNULENBQUM7SUFIVSwwQkFBMEI7UUFEdEMsK0JBQWdCLENBQUMsa0NBQWtDLENBQUM7O09BQ3hDLDBCQUEwQixDQUl0QztJQUFELGlDQUFDO0NBQUEsQUFKRCxJQUlDO0FBSlksZ0VBQTBCO0FBTXZDOztHQUVHO0FBRUg7SUFDRSxvQ0FBbUIsV0FBbUI7UUFBbkIsZ0JBQVcsR0FBWCxXQUFXLENBQVE7UUFDcEMsT0FBTztJQUNULENBQUM7SUFIVSwwQkFBMEI7UUFEdEMsK0JBQWdCLENBQUMsa0NBQWtDLENBQUM7O09BQ3hDLDBCQUEwQixDQUl0QztJQUFELGlDQUFDO0NBQUEsQUFKRCxJQUlDO0FBSlksZ0VBQTBCO0FBTXZDOztHQUVHO0FBRUg7SUFDRSxvQ0FBbUIsV0FBbUIsRUFBUyxTQUFrQztRQUE5RCxnQkFBVyxHQUFYLFdBQVcsQ0FBUTtRQUFTLGNBQVMsR0FBVCxTQUFTLENBQXlCO1FBQy9FLE9BQU87SUFDVCxDQUFDO0lBSFUsMEJBQTBCO1FBRHRDLCtCQUFnQixDQUFDLGtDQUFrQyxDQUFDOztPQUN4QywwQkFBMEIsQ0FJdEM7SUFBRCxpQ0FBQztDQUFBLEFBSkQsSUFJQztBQUpZLGdFQUEwQjtBQUt2Qzs7R0FFRztBQUNILFNBQWdCLFNBQVMsQ0FBQyxhQUFx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QTdDRCxJQTZDQztBQTdDWSx3Q0FBYztBQStDM0I7O0dBRUc7QUFDSCxTQUFnQixxQkFBcUIsQ0FBQyxTQUF3QjtJQUM1RCxPQUFPLGlCQUFpQixJQUFJLFNBQVMsQ0FBQTtBQUN2QyxDQUFDO0FBRkQsc0RBRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi9oZWxwZXJzJ1xuaW1wb3J0IHsgRXZlbnRDb25zdHJ1Y3RvciB9IGZyb20gJy4vRXZlbnRNYW5hZ2VyJ1xuXG5jb25zdCBjb21wb25lbnRTeW1ib2wgPSAnX19uYW1lX19zeW1ib2xfJ1xuY29uc3QgY29tcG9uZW50SWRTeW1ib2wgPSAnX19jb21wb25lbnRfX2lkXydcblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50TGlrZSB7XG4gIC8vIEBpbnRlcm5hbFxuICBbY29tcG9uZW50U3ltYm9sXT86IHN0cmluZ1xufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEaXNwb3NhYmxlQ29tcG9uZW50TGlrZSBleHRlbmRzIENvbXBvbmVudExpa2Uge1xuICAvLyBAaW50ZXJuYWxcbiAgW2NvbXBvbmVudElkU3ltYm9sXT86IHN0cmluZ1xuICBvbkRpc3Bvc2U/KCk6IHZvaWRcbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50Q29uc3RydWN0b3I8VCBleHRlbmRzIENvbXBvbmVudExpa2U+IHtcbiAgLy8gQGludGVybmFsXG4gIFtjb21wb25lbnRTeW1ib2xdPzogc3RyaW5nXG4gIGlzQ29tcG9uZW50PzogYm9vbGVhblxuICBvcmlnaW5hbENsYXNzTmFtZT86IHN0cmluZ1xuICBuZXcgKC4uLmFyZ3M6IGFueVtdKTogVFxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEaXNwb3NhYmxlQ29tcG9uZW50Q29uc3RydWN0b3I8VCBleHRlbmRzIERpc3Bvc2FibGVDb21wb25lbnRMaWtlPiB7XG4gIC8vIEBpbnRlcm5hbFxuICBbY29tcG9uZW50U3ltYm9sXT86IHN0cmluZ1xuICBpc0NvbXBvbmVudD86IGJvb2xlYW5cbiAgaXNEaXNwb3NhYmxlQ29tcG9uZW50PzogdHJ1ZVxuICBvcmlnaW5hbENsYXNzTmFtZT86IHN0cmluZ1xuICBuZXcgKC4uLmFyZ3M6IGFueVtdKTogVFxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuQEV2ZW50Q29uc3RydWN0b3IoJ2RjbC1kaXNwb3NhYmxlLWNvbXBvbmVudC1jcmVhdGVkJylcbmV4cG9ydCBjbGFzcyBEaXNwb3NhYmxlQ29tcG9uZW50Q3JlYXRlZCB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjb21wb25lbnRJZDogc3RyaW5nLCBwdWJsaWMgY29tcG9uZW50TmFtZTogc3RyaW5nKSB7XG4gICAgLy8gc3R1YlxuICB9XG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5ARXZlbnRDb25zdHJ1Y3RvcignZGNsLWRpc3Bvc2FibGUtY29tcG9uZW50LXJlbW92ZWQnKVxuZXhwb3J0IGNsYXNzIERpc3Bvc2FibGVDb21wb25lbnRSZW1vdmVkIHtcbiAgY29uc3RydWN0b3IocHVibGljIGNvbXBvbmVudElkOiBzdHJpbmcpIHtcbiAgICAvLyBzdHViXG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBFdmVudENvbnN0cnVjdG9yKCdkY2wtZGlzcG9zYWJsZS1jb21wb25lbnQtdXBkYXRlZCcpXG5leHBvcnQgY2xhc3MgRGlzcG9zYWJsZUNvbXBvbmVudFVwZGF0ZWQge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29tcG9uZW50SWQ6IHN0cmluZywgcHVibGljIGNvbXBvbmVudDogRGlzcG9zYWJsZUNvbXBvbmVudExpa2UpIHtcbiAgICAvLyBzdHViXG4gIH1cbn1cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gQ29tcG9uZW50KGNvbXBvbmVudE5hbWU6IHN0cmluZykge1xuICByZXR1cm4gZnVuY3Rpb248VEZ1bmN0aW9uIGV4dGVuZHMgQ29tcG9uZW50Q29uc3RydWN0b3I8YW55Pj4odGFyZ2V0OiBURnVuY3Rpb24pOiBURnVuY3Rpb24gfCB2b2lkIHtcbiAgICBpZiAodGFyZ2V0LmlzQ29tcG9uZW50KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICBgWW91IGNhbm5vdCBleHRlbmQgYSBjb21wb25lbnQuIFRyeWluZyB0byBleHRlbmQgJHt0YXJnZXQub3JpZ2luYWxDbGFzc05hbWV9IHdpdGg6ICR7Y29tcG9uZW50TmFtZX1gXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW5kZWRDbGFzcyA9IHRhcmdldCBhcyBhbnlcblxuICAgIGNvbnN0IFJlZ2lzdGVyZWRDb21wb25lbnQ6IGFueSA9IGZ1bmN0aW9uIFJlZ2lzdGVyZWRDb21wb25lbnQoKSB7XG4gICAgICBjb25zdCByZXQgPSBuZXcgZXh0ZW5kZWRDbGFzcyguLi4oYXJndW1lbnRzIGFzIGFueSkpXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXQsIGNvbXBvbmVudFN5bWJvbCwge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogY29tcG9uZW50TmFtZVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHJldFxuICAgIH1cblxuICAgIFJlZ2lzdGVyZWRDb21wb25lbnRbY29tcG9uZW50U3ltYm9sXSA9IGNvbXBvbmVudE5hbWVcbiAgICBSZWdpc3RlcmVkQ29tcG9uZW50LmlzQ29tcG9uZW50ID0gdHJ1ZVxuICAgIFJlZ2lzdGVyZWRDb21wb25lbnQub3JpZ2luYWxDbGFzc05hbWUgPSBjb21wb25lbnROYW1lXG5cbiAgICByZXR1cm4gUmVnaXN0ZXJlZENvbXBvbmVudCBhcyBURnVuY3Rpb25cbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gRGlzcG9zYWJsZUNvbXBvbmVudChjb21wb25lbnROYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uPFRGdW5jdGlvbiBleHRlbmRzIERpc3Bvc2FibGVDb21wb25lbnRDb25zdHJ1Y3Rvcjxhbnk+Pih0YXJnZXQ6IFRGdW5jdGlvbik6IFRGdW5jdGlvbiB8IHZvaWQge1xuICAgIGlmICh0YXJnZXQuaXNDb21wb25lbnQpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgIGBZb3UgY2Fubm90IGV4dGVuZCBhIGNvbXBvbmVudC4gVHJ5aW5nIHRvIGV4dGVuZCAke3RhcmdldC5vcmlnaW5hbENsYXNzTmFtZX0gd2l0aDogJHtjb21wb25lbnROYW1lfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBleHRlbmRlZENsYXNzID0gdGFyZ2V0IGFzIGFueVxuXG4gICAgY29uc3QgUmVnaXN0ZXJlZENvbXBvbmVudDogYW55ID0gZnVuY3Rpb24gUmVnaXN0ZXJlZENvbXBvbmVudCgpIHtcbiAgICAgIGlmICghRGlzcG9zYWJsZUNvbXBvbmVudC5lbmdpbmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBzZXQgYSBEaXNwb3NhYmxlQ29tcG9uZW50LmVuZ2luZSBiZWZvcmUgY3JlYXRpbmcgZGlzcG9zYWJsZSBjb21wb25lbnRzJylcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmV0ID0gbmV3IGV4dGVuZGVkQ2xhc3MoLi4uKGFyZ3VtZW50cyBhcyBhbnkpKVxuICAgICAgY29uc3QgaWQgPSB1dWlkKClcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJldCwgY29tcG9uZW50U3ltYm9sLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBjb21wb25lbnROYW1lXG4gICAgICB9KVxuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmV0LCBjb21wb25lbnRJZFN5bWJvbCwge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogaWRcbiAgICAgIH0pXG5cbiAgICAgIGlmIChEaXNwb3NhYmxlQ29tcG9uZW50LmVuZ2luZSkge1xuICAgICAgICBEaXNwb3NhYmxlQ29tcG9uZW50LmVuZ2luZS5yZWdpc3RlckNvbXBvbmVudChyZXQpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXRcbiAgICB9XG5cbiAgICBSZWdpc3RlcmVkQ29tcG9uZW50W2NvbXBvbmVudFN5bWJvbF0gPSBjb21wb25lbnROYW1lXG4gICAgUmVnaXN0ZXJlZENvbXBvbmVudC5pc0NvbXBvbmVudCA9IHRydWVcbiAgICBSZWdpc3RlcmVkQ29tcG9uZW50LmlzRGlzcG9zYWJsZUNvbXBvbmVudCA9IHRydWVcbiAgICBSZWdpc3RlcmVkQ29tcG9uZW50Lm9yaWdpbmFsQ2xhc3NOYW1lID0gY29tcG9uZW50TmFtZVxuXG4gICAgcmV0dXJuIFJlZ2lzdGVyZWRDb21wb25lbnQgYXMgVEZ1bmN0aW9uXG4gIH1cbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IG5hbWVzcGFjZSBEaXNwb3NhYmxlQ29tcG9uZW50IHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6d2hpdGVzcGFjZVxuICBleHBvcnQgbGV0IGVuZ2luZTogaW1wb3J0KCcuL0VuZ2luZScpLkVuZ2luZSB8IG51bGwgPSBudWxsXG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZTxUIGV4dGVuZHMgQ29tcG9uZW50TGlrZT4oY29tcG9uZW50OiBUIHwgQ29tcG9uZW50Q29uc3RydWN0b3I8VD4pOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoY29tcG9uZW50ICsgJyBpcyBub3QgYSBjb21wb25lbnQuJylcbiAgfVxuICBpZiAoY29tcG9uZW50W2NvbXBvbmVudFN5bWJvbF0pIHtcbiAgICByZXR1cm4gKGNvbXBvbmVudFtjb21wb25lbnRTeW1ib2xdIGFzIGFueSkgYXMgc3RyaW5nXG4gIH1cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihjb21wb25lbnQgKyAnIGlzIG5vdCBhIHJlZ2lzdGVyZWQgY29tcG9uZW50LicpXG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcG9uZW50SWQ8VCBleHRlbmRzIERpc3Bvc2FibGVDb21wb25lbnRMaWtlPihjb21wb25lbnQ6IFQpOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoY29tcG9uZW50ICsgJyBpcyBub3QgYSBjb21wb25lbnQuJylcbiAgfVxuICBpZiAoY29tcG9uZW50W2NvbXBvbmVudElkU3ltYm9sXSkge1xuICAgIHJldHVybiAoY29tcG9uZW50W2NvbXBvbmVudElkU3ltYm9sXSBhcyBhbnkpIGFzIHN0cmluZ1xuICB9XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoY29tcG9uZW50ICsgJyBpcyBub3QgYSByZWdpc3RlcmVkIGNvbXBvbmVudC4nKVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3h5Q29tcG9uZW50IHtcbiAgZGlydHk6IGJvb2xlYW4gPSBmYWxzZVxuICBkYXRhOiBhbnkgPSB7fVxuXG4gIHN0YXRpYyBmaWVsZCh0YXJnZXQ6IFByb3h5Q29tcG9uZW50LCBwcm9wZXJ0eUtleTogc3RyaW5nKSB7XG4gICAgaWYgKGRlbGV0ZSAodGFyZ2V0IGFzIGFueSlbcHJvcGVydHlLZXldKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleS50b1N0cmluZygpLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24odGhpczogUHJveHlDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW3Byb3BlcnR5S2V5XVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHRoaXM6IFByb3h5Q29tcG9uZW50LCB2YWx1ZSkge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5kYXRhW3Byb3BlcnR5S2V5XSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWVcbiAgICAgICAgICAgIHRoaXMuZGF0YVtwcm9wZXJ0eUtleV0gPSB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcmVhZG9ubHkodGFyZ2V0OiBQcm94eUNvbXBvbmVudCwgcHJvcGVydHlLZXk6IHN0cmluZykge1xuICAgIGlmIChkZWxldGUgKHRhcmdldCBhcyBhbnkpW3Byb3BlcnR5S2V5XSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXkudG9TdHJpbmcoKSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKHRoaXM6IFByb3h5Q29tcG9uZW50KSB7XG4gICAgICAgICAgaWYgKHByb3BlcnR5S2V5IGluIHRoaXMuZGF0YSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGZpZWxkICR7cHJvcGVydHlLZXl9IGlzIHVuaW5pdGlhbGl6ZWRgKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW3Byb3BlcnR5S2V5XVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHRoaXM6IFByb3h5Q29tcG9uZW50LCB2YWx1ZSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eUtleSBpbiB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGZpZWxkICR7cHJvcGVydHlLZXl9IGlzIHJlYWRvbmx5YClcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5kYXRhW3Byb3BlcnR5S2V5XSA9IHZhbHVlXG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGFcbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGlzcG9zYWJsZUNvbXBvbmVudChjb21wb25lbnQ6IENvbXBvbmVudExpa2UpIHtcbiAgcmV0dXJuIGNvbXBvbmVudElkU3ltYm9sIGluIGNvbXBvbmVudFxufVxuIl19\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/ecs/Component.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/ecs/Engine.ts":
    /*!*****************************************************!*\
      !*** ./packages/decentraland-ecs/src/ecs/Engine.ts ***!
      \*****************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Entity_1 = __webpack_require__(/*! ./Entity */ \"./packages/decentraland-ecs/src/ecs/Entity.ts\");\nvar Component_1 = __webpack_require__(/*! ./Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\");\nvar System_1 = __webpack_require__(/*! ./System */ \"./packages/decentraland-ecs/src/ecs/System.ts\");\nvar EventManager_1 = __webpack_require__(/*! ./EventManager */ \"./packages/decentraland-ecs/src/ecs/EventManager.ts\");\nexports.log = function (message) {\n    // tslint:disable-next-line:no-console\n    console.log('DEBUG:', message);\n};\n/**\n * @public\n */\nvar EngineEvent = /** @class */ (function () {\n    function EngineEvent(data) {\n        this.data = data;\n        // stub\n        // tslint:disable-next-line:no-console\n        console.log('Engine event', data);\n    }\n    EngineEvent = __decorate([\n        EventManager_1.EventConstructor('engineEvent'),\n        __metadata(\"design:paramtypes\", [Object])\n    ], EngineEvent);\n    return EngineEvent;\n}());\nexports.EngineEvent = EngineEvent;\n/**\n * @public\n */\nvar Engine = /** @class */ (function () {\n    function Engine() {\n        this.eventManager = new EventManager_1.EventManager();\n        this.rootEntity = new Entity_1.Entity(null, 'scene');\n        this.entities = {};\n        this.entityLists = {};\n        this.systems = [];\n        this.disposableComponents = {};\n        this.idGenerator = 1;\n        this.allRequirements = {};\n        // systems that doesn't require any component or handle their own logic\n        this.simpleSystems = [];\n        this.rootEntity.engineId = '0';\n        this.eventManager.addListener(Entity_1.ComponentAdded, this, this.componentAdded);\n        this.eventManager.addListener(Entity_1.ComponentRemoved, this, this.componentRemoved);\n    }\n    Engine.prototype.addEntity = function (entity) {\n        if (entity.engineId) {\n            exports.log('The entity is already in the engine. Please fix this');\n            return;\n        }\n        var newId = (this.idGenerator++).toString(10);\n        entity.engineId = newId;\n        entity.eventManager = this.eventManager;\n        if (!entity.parent) {\n            entity.parent = this.rootEntity;\n        }\n        else {\n            if (entity.parent.engineId === null) {\n                exports.log('Engine: warning, added a entity with a parent not present in the engine');\n            }\n        }\n        this.entities[newId] = entity;\n        this.checkRequirementsAndAdd(entity);\n        entity.alive = true;\n    };\n    Engine.prototype.removeEntity = function (entity, removeChildren, newParent) {\n        if (removeChildren === void 0) { removeChildren = false; }\n        var id = entity.engineId;\n        if (id !== null && this.entities[id]) {\n            for (var componentName in entity.components) {\n                var componentSystems = this.allRequirements[componentName];\n                if (componentSystems) {\n                    for (var systemIndex in componentSystems) {\n                        componentSystems[systemIndex].removeEntity(entity);\n                    }\n                }\n                delete this.entityLists[componentName][id];\n            }\n            for (var i = 0; i < this.simpleSystems.length; i++) {\n                var system = this.simpleSystems[i];\n                if (system.hasEntity(entity)) {\n                    system.removeEntity(entity);\n                }\n            }\n            if (removeChildren) {\n                for (var i in entity.children) {\n                    var child = entity.children[i];\n                    if (child) {\n                        this.removeEntity(child, true);\n                    }\n                }\n            }\n            else {\n                // If a new Parent is defined, this Entity will be set as the new Parent\n                for (var i in entity.children) {\n                    var child = entity.children[i];\n                    if (child) {\n                        child.parent = newParent || this.rootEntity;\n                    }\n                }\n            }\n            entity.alive = false;\n            entity.eventManager = null;\n            entity.engineId = null;\n            delete this.entities[id];\n        }\n        else {\n            exports.log('Engine: Trying to remove non existent entity from engine.');\n            if (id) {\n                exports.log('Engine: Entity id: ' + id);\n            }\n            else {\n                exports.log('Engine: Entity has not been added to any engine yet. (No entity.engineId)');\n            }\n            exports.log(\"Engine: Entity's components:\");\n            for (var componentName in entity.components) {\n                exports.log(componentName);\n            }\n        }\n    };\n    Engine.prototype.addSystem = function (system) {\n        if (this.systems.indexOf(system) !== -1) {\n            exports.log('Engine: Trying to add a system that is already added. Aborting');\n            return;\n        }\n        this.systems.push(system);\n        system.active = true;\n        this.registerSystem(system);\n        for (var id in this.entities) {\n            this.checkRequirements(this.entities[id], system);\n        }\n    };\n    Engine.prototype.update = function (dt) {\n        for (var i in this.systems) {\n            var system = this.systems[i];\n            if (system.active && system.update) {\n                system.update(dt);\n            }\n        }\n        for (var i in this.systems) {\n            var system = this.systems[i];\n            if (system.active && system.draw) {\n                system.draw();\n            }\n        }\n    };\n    Engine.prototype.getEntitiesWithComponent = function (component) {\n        var componentName = typeof component === 'string' ? component : Component_1.getComponentName(component);\n        if (componentName in this.entityLists) {\n            return this.entityLists[componentName];\n        }\n        else {\n            return (this.entityLists[componentName] = {});\n        }\n    };\n    Engine.prototype.registerComponent = function (component) {\n        var id = Component_1.getComponentId(component);\n        var name = Component_1.getComponentName(component);\n        this.disposableComponents[id] = component;\n        this.eventManager.fireEvent(new Component_1.DisposableComponentCreated(id, name));\n        this.eventManager.fireEvent(new Component_1.DisposableComponentUpdated(id, component));\n    };\n    Engine.prototype.disposeComponent = function (component) {\n        var id = Component_1.getComponentId(component);\n        if (delete this.disposableComponents[id]) {\n            this.eventManager.fireEvent(new Component_1.DisposableComponentRemoved(id));\n            if (component.onDispose) {\n                component.onDispose();\n            }\n        }\n    };\n    Engine.prototype.updateComponent = function (component) {\n        this.eventManager.fireEvent(new Component_1.DisposableComponentUpdated(Component_1.getComponentId(component), component));\n    };\n    Engine.prototype.registerSystem = function (system) {\n        system.active = true;\n        if (system.activate) {\n            system.activate(this);\n        }\n        if (system instanceof System_1.ComponentSystem) {\n            var requiresNames = system.requiresNames;\n            for (var i = 0; i < requiresNames.length; i++) {\n                var componentName = requiresNames[i];\n                var systemList = this.allRequirements[componentName];\n                if (!systemList) {\n                    this.allRequirements[componentName] = systemList = [];\n                }\n                if (systemList.indexOf(system) === -1) {\n                    systemList.push(system);\n                }\n            }\n        }\n        else {\n            this.simpleSystems.push(system);\n        }\n    };\n    Engine.prototype.checkRequirementsAndAdd = function (entity) {\n        if (entity.engineId === null)\n            return;\n        for (var componentName in entity.components) {\n            if (!(componentName in this.entityLists)) {\n                this.entityLists[componentName] = {};\n            }\n            this.entityLists[componentName][entity.engineId] = entity;\n            var componentSystems = this.allRequirements[componentName];\n            if (componentSystems) {\n                for (var systemIndex in componentSystems) {\n                    this.checkRequirements(entity, componentSystems[systemIndex]);\n                }\n            }\n        }\n        for (var i = 0; i < this.simpleSystems.length; i++) {\n            this.checkRequirements(entity, this.simpleSystems[i]);\n        }\n    };\n    Engine.prototype.checkRequirements = function (entity, system) {\n        if (system.meetsRequirements(entity)) {\n            if (!system.hasEntity(entity)) {\n                system.addEntity(entity);\n            }\n        }\n        else {\n            if (system.hasEntity(entity)) {\n                system.removeEntity(entity);\n            }\n        }\n    };\n    Engine.prototype.componentAdded = function (event) {\n        var _a;\n        var entity = event.entity, componentName = event.componentName;\n        if (entity.engineId === null)\n            return;\n        if (!this.entityLists[componentName]) {\n            this.entityLists[componentName] = (_a = {}, _a[entity.engineId] = entity, _a);\n        }\n        else {\n            this.entityLists[componentName][entity.engineId] = entity;\n        }\n        var requirements = this.allRequirements[componentName];\n        if (requirements) {\n            for (var i in requirements) {\n                this.checkRequirements(entity, requirements[i]);\n            }\n        }\n    };\n    Engine.prototype.componentRemoved = function (event) {\n        // In case a single component gets removed from an entity, we inform\n        // all systems that this entity lost this specific component.\n        var entity = event.entity, componentName = event.componentName;\n        if (entity.engineId === null)\n            return;\n        delete this.entityLists[componentName][entity.engineId];\n        var requirements = this.allRequirements[componentName];\n        if (requirements) {\n            for (var i in requirements) {\n                this.checkRequirements(entity, requirements[i]);\n            }\n        }\n    };\n    return Engine;\n}());\nexports.Engine = Engine;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW5naW5lLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Vjcy9FbmdpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxtQ0FBbUU7QUFDbkUseUNBUW9CO0FBQ3BCLG1DQUFtRDtBQUNuRCwrQ0FBK0Q7QUFJcEQsUUFBQSxHQUFHLEdBQUcsVUFBQyxPQUFlO0lBQy9CLHNDQUFzQztJQUN0QyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQTtBQUNoQyxDQUFDLENBQUE7QUFFRDs7R0FFRztBQUVIO0lBQ0UscUJBQW1CLElBQVM7UUFBVCxTQUFJLEdBQUosSUFBSSxDQUFLO1FBQzFCLE9BQU87UUFDUCxzQ0FBc0M7UUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUxVLFdBQVc7UUFEdkIsK0JBQWdCLENBQUMsYUFBYSxDQUFDOztPQUNuQixXQUFXLENBTXZCO0lBQUQsa0JBQUM7Q0FBQSxBQU5ELElBTUM7QUFOWSxrQ0FBVztBQVF4Qjs7R0FFRztBQUNIO0lBZUU7UUFkQSxpQkFBWSxHQUFpQixJQUFJLDJCQUFZLEVBQUUsQ0FBQTtRQUV0QyxlQUFVLEdBQUcsSUFBSSxlQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQ3RDLGFBQVEsR0FBMkIsRUFBRSxDQUFBO1FBQ3JDLGdCQUFXLEdBQTJDLEVBQUUsQ0FBQTtRQUV6RCxZQUFPLEdBQWMsRUFBRSxDQUFBO1FBQ3ZCLHlCQUFvQixHQUE0QyxFQUFFLENBQUE7UUFDbEUsZ0JBQVcsR0FBRyxDQUFDLENBQUE7UUFDTixvQkFBZSxHQUE4QixFQUFFLENBQUE7UUFFaEUsdUVBQXVFO1FBQ3RELGtCQUFhLEdBQWMsRUFBRSxDQUFBO1FBRzVDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQTtRQUM5QixJQUFJLENBQUMs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LFFBQVEsQ0FBQyxHQUFHLE1BQU0sQ0FBQTtTQUMxRDtRQUVELElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLENBQUE7UUFFeEQsSUFBSSxZQUFZLEVBQUU7WUFDaEIsS0FBSyxJQUFJLENBQUMsSUFBSSxZQUFZLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7YUFDaEQ7U0FDRjtJQUNILENBQUM7SUFFTyxpQ0FBZ0IsR0FBeEIsVUFBeUIsS0FBdUI7UUFDOUMsb0VBQW9FO1FBQ3BFLDZEQUE2RDtRQUNyRCxJQUFBLHFCQUFNLEVBQUUsbUNBQWEsQ0FBVTtRQUV2QyxJQUFJLE1BQU0sQ0FBQyxRQUFRLEtBQUssSUFBSTtZQUFFLE9BQU07UUFFcEMsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUV2RCxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBRXhELElBQUksWUFBWSxFQUFFO1lBQ2hCLEtBQUssSUFBSSxDQUFDLElBQUksWUFBWSxFQUFFO2dCQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2FBQ2hEO1NBQ0Y7SUFDSCxDQUFDO0lBQ0gsYUFBQztBQUFELENBQUMsQUFuUkQsSUFtUkM7QUFuUlksd0JBQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHksIENvbXBvbmVudEFkZGVkLCBDb21wb25lbnRSZW1vdmVkIH0gZnJvbSAnLi9FbnRpdHknXG5pbXBvcnQge1xuICBnZXRDb21wb25lbnROYW1lLFxuICBnZXRDb21wb25lbnRJZCxcbiAgRGlzcG9zYWJsZUNvbXBvbmVudFVwZGF0ZWQsXG4gIERpc3Bvc2FibGVDb21wb25lbnRMaWtlLFxuICBDb21wb25lbnRDb25zdHJ1Y3RvcixcbiAgRGlzcG9zYWJsZUNvbXBvbmVudENyZWF0ZWQsXG4gIERpc3Bvc2FibGVDb21wb25lbnRSZW1vdmVkXG59IGZyb20gJy4vQ29tcG9uZW50J1xuaW1wb3J0IHsgSVN5c3RlbSwgQ29tcG9uZW50U3lzdGVtIH0gZnJvbSAnLi9TeXN0ZW0nXG5pbXBvcnQgeyBFdmVudE1hbmFnZXIsIEV2ZW50Q29uc3RydWN0b3IgfSBmcm9tICcuL0V2ZW50TWFuYWdlcidcblxuZGVjbGFyZSB2YXIgY29uc29sZTogYW55XG5cbmV4cG9ydCBsZXQgbG9nID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICBjb25zb2xlLmxvZygnREVCVUc6JywgbWVzc2FnZSlcbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBFdmVudENvbnN0cnVjdG9yKCdlbmdpbmVFdmVudCcpXG5leHBvcnQgY2xhc3MgRW5naW5lRXZlbnQge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgZGF0YTogYW55KSB7XG4gICAgLy8gc3R1YlxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2coJ0VuZ2luZSBldmVudCcsIGRhdGEpXG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBFbmdpbmUge1xuICBldmVudE1hbmFnZXI6IEV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKVxuXG4gIHJlYWRvbmx5IHJvb3RFbnRpdHkgPSBuZXcgRW50aXR5KG51bGwsICdzY2VuZScpXG4gIHJlYWRvbmx5IGVudGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCBFbnRpdHk+ID0ge31cbiAgcmVhZG9ubHkgZW50aXR5TGlzdHM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIEVudGl0eT4+ID0ge31cblxuICBwcml2YXRlIHN5c3RlbXM6IElTeXN0ZW1bXSA9IFtdXG4gIHByaXZhdGUgZGlzcG9zYWJsZUNvbXBvbmVudHM6IFJlY29yZDxzdHJpbmcsIERpc3Bvc2FibGVDb21wb25lbnRMaWtlPiA9IHt9XG4gIHByaXZhdGUgaWRHZW5lcmF0b3IgPSAxXG4gIHByaXZhdGUgcmVhZG9ubHkgYWxsUmVxdWlyZW1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBJU3lzdGVtW10+ID0ge31cblxuICAvLyBzeXN0ZW1zIHRoYXQgZG9lc24ndCByZXF1aXJlIGFueSBjb21wb25lbnQgb3IgaGFuZGxlIHRoZWlyIG93biBsb2dpY1xuICBwcml2YXRlIHJlYWRvbmx5IHNpbXBsZVN5c3RlbXM6IElTeXN0ZW1bXSA9IFtdXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yb290RW50aXR5LmVuZ2luZUlkID0gJzAnXG4gICAgdGhpcy5ldmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoQ29tcG9uZW50QWRkZWQsIHRoaXMsIHRoaXMuY29tcG9uZW50QWRkZWQpXG4gICAgdGhpcy5ldmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoQ29tcG9uZW50UmVtb3ZlZCwgdGhpcywgdGhpcy5jb21wb25lbnRSZW1vdmVkKVxuICB9XG5cbiAgYWRkRW50aXR5KGVudGl0eTogRW50aXR5KSB7XG4gICAgaWYgKGVudGl0eS5lbmdpbmVJZCkge1xuICAgICAgbG9nKCdUaGUgZW50aXR5IGlzIGFscmVhZHkgaW4gdGhlIGVuZ2luZS4gUGxlYXNlIGZpeCB0aGlzJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG5ld0lkID0gKHRoaXMuaWRHZW5lcmF0b3IrKykudG9TdHJpbmcoMTApXG5cbiAgICBlbnRpdHkuZW5naW5lSWQgPSBuZXdJZFxuICAgIGVudGl0eS5ldmVudE1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlclxuXG4gICAgaWYgKCFlbnRpdHkucGFyZW50KSB7XG4gICAgICBlbnRpdHkucGFyZW50ID0gdGhpcy5yb290RW50aXR5XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbnRpdHkucGFyZW50LmVuZ2luZUlkID09PSBudWxsKSB7XG4gICAgICAgIGxvZygnRW5naW5lOiB3YXJuaW5nLCBhZGRlZCBhIGVudGl0eSB3aXRoIGEgcGFyZW50IG5vdCBwcmVzZW50IGluIHRoZSBlbmdpbmUnKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZW50aXRpZXNbbmV3SWRdID0gZW50aXR5XG5cbiAgICB0aGlzLmNoZWNrUmVxdWlyZW1lbnRzQW5kQWRkKGVudGl0eSlcblxuICAgIGVudGl0eS5hbGl2ZSA9IHRydWVcbiAgfVxuXG4gIHJlbW92ZUVudGl0eShlbnRpdHk6IEVudGl0eSwgcmVtb3ZlQ2hpbGRyZW46IGJvb2xlYW4gPSBmYWxzZSwgbmV3UGFyZW50PzogRW50aXR5KSB7XG4gICAgY29uc3QgaWQgPSBlbnRpdHkuZW5naW5lSWRcbiAgICBpZiAoaWQgIT09IG51bGwgJiYgdGhpcy5lbnRpdGllc1tpZF0pIHtcbiAgICAgIGZvciAobGV0IGNvbXBvbmVudE5hbWUgaW4gZW50aXR5LmNvbXBvbmVudHMpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50U3lzdGVtcyA9IHRoaXMuYWxsUmVxdWlyZW1lbnRzW2NvbXBvbmVudE5hbWVdXG5cbiAgICAgICAgaWYgKGNvbXBvbmVudFN5c3RlbXMpIHtcbiAgICAgICAgICBmb3IgKGxldCBzeXN0ZW1JbmRleCBpbiBjb21wb25lbnRTeXN0ZW1zKSB7XG4gICAgICAgICAgICBjb21wb25lbnRTeXN0ZW1zW3N5c3RlbUluZGV4XS5yZW1vdmVFbnRpdHkoZW50aXR5KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSB0aGlzLmVudGl0eUxpc3RzW2NvbXBvbmVudE5hbWVdW2lkXVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2ltcGxlU3lzdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzeXN0ZW0gPSB0aGlzLnNpbXBsZVN5c3RlbXNbaV1cblxuICAgICAgICBpZiAoc3lzdGVtLmhhc0VudGl0eShlbnRpdHkpKSB7XG4gICAgICAgICAgc3lzdGVtLnJlbW92ZUVudGl0eShlbnRpdHkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHJlbW92ZUNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAobGV0IGkgaW4gZW50aXR5LmNoaWxkcmVuKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGQgPSBlbnRpdHkuY2hpbGRyZW5baV1cbiAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRW50aXR5KGNoaWxkLCB0cnVlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgYSBuZXcgUGFyZW50IGlzIGRlZmluZWQsIHRoaXMgRW50aXR5IHdpbGwgYmUgc2V0IGFzIHRoZSBuZXcgUGFyZW50XG4gICAgICAgIGZvciAobGV0IGkgaW4gZW50aXR5LmNoaWxkcmVuKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGQgPSBlbnRpdHkuY2hpbGRyZW5baV1cbiAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IG5ld1BhcmVudCB8fCB0aGlzLnJvb3RFbnRpdHlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZW50aXR5LmFsaXZlID0gZmFsc2VcbiAgICAgIGVudGl0eS5ldmVudE1hbmFnZXIgPSBudWxsXG4gICAgICBlbnRpdHkuZW5naW5lSWQgPSBudWxsXG5cbiAgICAgIGRlbGV0ZSB0aGlzLmVudGl0aWVzW2lkXVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2coJ0VuZ2luZTogVHJ5aW5nIHRvIHJlbW92ZSBub24gZXhpc3RlbnQgZW50aXR5IGZyb20gZW5naW5lLicpXG4gICAgICBpZiAoaWQpIHtcbiAgICAgICAgbG9nKCdFbmdpbmU6IEVudGl0eSBpZDogJyArIGlkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nKCdFbmdpbmU6IEVudGl0eSBoYXMgbm90IGJlZW4gYWRkZWQgdG8gYW55IGVuZ2luZSB5ZXQuIChObyBlbnRpdHkuZW5naW5lSWQpJylcbiAgICAgIH1cbiAgICAgIGxvZyhcIkVuZ2luZTogRW50aXR5J3MgY29tcG9uZW50czpcIilcbiAgICAgIGZvciAobGV0IGNvbXBvbmVudE5hbWUgaW4gZW50aXR5LmNvbXBvbmVudHMpIHtcbiAgICAgICAgbG9nKGNvbXBvbmVudE5hbWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYWRkU3lzdGVtKHN5c3RlbTogSVN5c3RlbSkge1xuICAgIGlmICh0aGlzLnN5c3RlbXMuaW5kZXhPZihzeXN0ZW0pICE9PSAtMSkge1xuICAgICAgbG9nKCdFbmdpbmU6IFRyeWluZyB0byBhZGQgYSBzeXN0ZW0gdGhhdCBpcyBhbHJlYWR5IGFkZGVkLiBBYm9ydGluZycpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnN5c3RlbXMucHVzaChzeXN0ZW0pXG5cbiAgICBzeXN0ZW0uYWN0aXZlID0gdHJ1ZVxuXG4gICAgdGhpcy5yZWdpc3RlclN5c3RlbShzeXN0ZW0pXG5cbiAgICBmb3IgKGxldCBpZCBpbiB0aGlzLmVudGl0aWVzKSB7XG4gICAgICB0aGlzLmNoZWNrUmVxdWlyZW1lbnRzKHRoaXMuZW50aXRpZXNbaWRdLCBzeXN0ZW0pXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKGR0OiBudW1iZXIpIHtcbiAgICBmb3IgKGxldCBpIGluIHRoaXMuc3lzdGVtcykge1xuICAgICAgY29uc3Qgc3lzdGVtID0gdGhpcy5zeXN0ZW1zW2ldXG4gICAgICBpZiAoc3lzdGVtLmFjdGl2ZSAmJiBzeXN0ZW0udXBkYXRlKSB7XG4gICAgICAgIHN5c3RlbS51cGRhdGUoZHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSBpbiB0aGlzLnN5c3RlbXMpIHtcbiAgICAgIGNvbnN0IHN5c3RlbSA9IHRoaXMuc3lzdGVtc1tpXVxuICAgICAgaWYgKHN5c3RlbS5hY3RpdmUgJiYgc3lzdGVtLmRyYXcpIHtcbiAgICAgICAgc3lzdGVtLmRyYXcoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEVudGl0aWVzV2l0aENvbXBvbmVudChjb21wb25lbnQ6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgZ2V0RW50aXRpZXNXaXRoQ29tcG9uZW50KGNvbXBvbmVudDogQ29tcG9uZW50Q29uc3RydWN0b3I8YW55Pik6IFJlY29yZDxzdHJpbmcsIEVudGl0eT5cbiAgZ2V0RW50aXRpZXNXaXRoQ29tcG9uZW50KGNvbXBvbmVudDogQ29tcG9uZW50Q29uc3RydWN0b3I8YW55PiB8IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIEVudGl0eT4ge1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSB0eXBlb2YgY29tcG9uZW50ID09PSAnc3RyaW5nJyA/IGNvbXBvbmVudCA6IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50KVxuXG4gICAgaWYgKGNvbXBvbmVudE5hbWUgaW4gdGhpcy5lbnRpdHlMaXN0cykge1xuICAgICAgcmV0dXJuIHRoaXMuZW50aXR5TGlzdHNbY29tcG9uZW50TmFtZV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICh0aGlzLmVudGl0eUxpc3RzW2NvbXBvbmVudE5hbWVdID0ge30pXG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50OiBEaXNwb3NhYmxlQ29tcG9uZW50TGlrZSkge1xuICAgIGNvbnN0IGlkID0gZ2V0Q29tcG9uZW50SWQoY29tcG9uZW50KVxuICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudClcbiAgICB0aGlzLmRpc3Bvc2FibGVDb21wb25lbnRzW2lkXSA9IGNvbXBvbmVudFxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgRGlzcG9zYWJsZUNvbXBvbmVudENyZWF0ZWQoaWQsIG5hbWUpKVxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgRGlzcG9zYWJsZUNvbXBvbmVudFVwZGF0ZWQoaWQsIGNvbXBvbmVudCkpXG4gIH1cblxuICBkaXNwb3NlQ29tcG9uZW50KGNvbXBvbmVudDogRGlzcG9zYWJsZUNvbXBvbmVudExpa2UpIHtcbiAgICBjb25zdCBpZCA9IGdldENvbXBvbmVudElkKGNvbXBvbmVudClcblxuICAgIGlmIChkZWxldGUgdGhpcy5kaXNwb3NhYmxlQ29tcG9uZW50c1tpZF0pIHtcbiAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgRGlzcG9zYWJsZUNvbXBvbmVudFJlbW92ZWQoaWQpKVxuXG4gICAgICBpZiAoY29tcG9uZW50Lm9uRGlzcG9zZSkge1xuICAgICAgICBjb21wb25lbnQub25EaXNwb3NlKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGVDb21wb25lbnQoY29tcG9uZW50OiBEaXNwb3NhYmxlQ29tcG9uZW50TGlrZSkge1xuICAgIHRoaXMuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChuZXcgRGlzcG9zYWJsZUNvbXBvbmVudFVwZGF0ZWQoZ2V0Q29tcG9uZW50SWQoY29tcG9uZW50KSwgY29tcG9uZW50KSlcbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJTeXN0ZW0oc3lzdGVtOiBJU3lzdGVtKSB7XG4gICAgc3lzdGVtLmFjdGl2ZSA9IHRydWVcblxuICAgIGlmIChzeXN0ZW0uYWN0aXZhdGUpIHtcbiAgICAgIHN5c3RlbS5hY3RpdmF0ZSh0aGlzKVxuICAgIH1cblxuICAgIGlmIChzeXN0ZW0gaW5zdGFuY2VvZiBDb21wb25lbnRTeXN0ZW0pIHtcbiAgICAgIGNvbnN0IHJlcXVpcmVzTmFtZXMgPSBzeXN0ZW0ucmVxdWlyZXNOYW1lc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1aXJlc05hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSByZXF1aXJlc05hbWVzW2ldXG5cbiAgICAgICAgbGV0IHN5c3RlbUxpc3QgPSB0aGlzLmFsbFJlcXVpcmVtZW50c1tjb21wb25lbnROYW1lXVxuXG4gICAgICAgIGlmICghc3lzdGVtTGlzdCkge1xuICAgICAgICAgIHRoaXMuYWxsUmVxdWlyZW1lbnRzW2NvbXBvbmVudE5hbWVdID0gc3lzdGVtTGlzdCA9IFtdXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3lzdGVtTGlzdC5pbmRleE9mKHN5c3RlbSkgPT09IC0xKSB7XG4gICAgICAgICAgc3lzdGVtTGlzdC5wdXNoKHN5c3RlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNpbXBsZVN5c3RlbXMucHVzaChzeXN0ZW0pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1JlcXVpcmVtZW50c0FuZEFkZChlbnRpdHk6IEVudGl0eSkge1xuICAgIGlmIChlbnRpdHkuZW5naW5lSWQgPT09IG51bGwpIHJldHVyblxuXG4gICAgZm9yIChsZXQgY29tcG9uZW50TmFtZSBpbiBlbnRpdHkuY29tcG9uZW50cykge1xuICAgICAgaWYgKCEoY29tcG9uZW50TmFtZSBpbiB0aGlzLmVudGl0eUxpc3RzKSkge1xuICAgICAgICB0aGlzLmVudGl0eUxpc3RzW2NvbXBvbmVudE5hbWVdID0ge31cbiAgICAgIH1cblxuICAgICAgdGhpcy5lbnRpdHlMaXN0c1tjb21wb25lbnROYW1lXVtlbnRpdHkuZW5naW5lSWRdID0gZW50aXR5XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudFN5c3RlbXMgPSB0aGlzLmFsbFJlcXVpcmVtZW50c1tjb21wb25lbnROYW1lXVxuXG4gICAgICBpZiAoY29tcG9uZW50U3lzdGVtcykge1xuICAgICAgICBmb3IgKGxldCBzeXN0ZW1JbmRleCBpbiBjb21wb25lbnRTeXN0ZW1zKSB7XG4gICAgICAgICAgdGhpcy5jaGVja1JlcXVpcmVtZW50cyhlbnRpdHksIGNvbXBvbmVudFN5c3RlbXNbc3lzdGVtSW5kZXhdKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpbXBsZVN5c3RlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuY2hlY2tSZXF1aXJlbWVudHMoZW50aXR5LCB0aGlzLnNpbXBsZVN5c3RlbXNbaV0pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1JlcXVpcmVtZW50cyhlbnRpdHk6IEVudGl0eSwgc3lzdGVtOiBJU3lzdGVtKSB7XG4gICAgaWYgKHN5c3RlbS5tZWV0c1JlcXVpcmVtZW50cyhlbnRpdHkpKSB7XG4gICAgICBpZiAoIXN5c3RlbS5oYXNFbnRpdHkoZW50aXR5KSkge1xuICAgICAgICBzeXN0ZW0uYWRkRW50aXR5KGVudGl0eSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN5c3RlbS5oYXNFbnRpdHkoZW50aXR5KSkge1xuICAgICAgICBzeXN0ZW0ucmVtb3ZlRW50aXR5KGVudGl0eSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBvbmVudEFkZGVkKGV2ZW50OiBDb21wb25lbnRBZGRlZCkge1xuICAgIGNvbnN0IHsgZW50aXR5LCBjb21wb25lbnROYW1lIH0gPSBldmVudFxuXG4gICAgaWYgKGVudGl0eS5lbmdpbmVJZCA9PT0gbnVsbCkgcmV0dXJuXG5cbiAgICBpZiAoIXRoaXMuZW50aXR5TGlzdHNbY29tcG9uZW50TmFtZV0pIHtcbiAgICAgIHRoaXMuZW50aXR5TGlzdHNbY29tcG9uZW50TmFtZV0gPSB7IFtlbnRpdHkuZW5naW5lSWRdOiBlbnRpdHkgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVudGl0eUxpc3RzW2NvbXBvbmVudE5hbWVdW2VudGl0eS5lbmdpbmVJZF0gPSBlbnRpdHlcbiAgICB9XG5cbiAgICBjb25zdCByZXF1aXJlbWVudHMgPSB0aGlzLmFsbFJlcXVpcmVtZW50c1tjb21wb25lbnROYW1lXVxuXG4gICAgaWYgKHJlcXVpcmVtZW50cykge1xuICAgICAgZm9yIChsZXQgaSBpbiByZXF1aXJlbWVudHMpIHtcbiAgICAgICAgdGhpcy5jaGVja1JlcXVpcmVtZW50cyhlbnRpdHksIHJlcXVpcmVtZW50c1tpXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNvbXBvbmVudFJlbW92ZWQoZXZlbnQ6IENvbXBvbmVudFJlbW92ZWQpIHtcbiAgICAvLyBJbiBjYXNlIGEgc2luZ2xlIGNvbXBvbmVudCBnZXRzIHJlbW92ZWQgZnJvbSBhbiBlbnRpdHksIHdlIGluZm9ybVxuICAgIC8vIGFsbCBzeXN0ZW1zIHRoYXQgdGhpcyBlbnRpdHkgbG9zdCB0aGlzIHNwZWNpZmljIGNvbXBvbmVudC5cbiAgICBjb25zdCB7IGVudGl0eSwgY29tcG9uZW50TmFtZSB9ID0gZXZlbnRcblxuICAgIGlmIChlbnRpdHkuZW5naW5lSWQgPT09IG51bGwpIHJldHVyblxuXG4gICAgZGVsZXRlIHRoaXMuZW50aXR5TGlzdHNbY29tcG9uZW50TmFtZV1bZW50aXR5LmVuZ2luZUlkXVxuXG4gICAgY29uc3QgcmVxdWlyZW1lbnRzID0gdGhpcy5hbGxSZXF1aXJlbWVudHNbY29tcG9uZW50TmFtZV1cblxuICAgIGlmIChyZXF1aXJlbWVudHMpIHtcbiAgICAgIGZvciAobGV0IGkgaW4gcmVxdWlyZW1lbnRzKSB7XG4gICAgICAgIHRoaXMuY2hlY2tSZXF1aXJlbWVudHMoZW50aXR5LCByZXF1aXJlbWVudHNbaV0pXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/ecs/Engine.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/ecs/Entity.ts":
    /*!*****************************************************!*\
      !*** ./packages/decentraland-ecs/src/ecs/Entity.ts ***!
      \*****************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Component_1 = __webpack_require__(/*! ./Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\");\nvar Engine_1 = __webpack_require__(/*! ./Engine */ \"./packages/decentraland-ecs/src/ecs/Engine.ts\");\nvar EventManager_1 = __webpack_require__(/*! ./EventManager */ \"./packages/decentraland-ecs/src/ecs/EventManager.ts\");\nvar helpers_1 = __webpack_require__(/*! ./helpers */ \"./packages/decentraland-ecs/src/ecs/helpers.ts\");\n// tslint:disable:no-use-before-declare\n/**\n * @public\n */\nvar Entity = /** @class */ (function () {\n    function Entity(_parent, name) {\n        if (_parent === void 0) { _parent = null; }\n        this.name = name;\n        this.children = {};\n        this.eventManager = null;\n        this.alive = false;\n        this.uuid = helpers_1.uuid();\n        this.components = {};\n        this._parent = null;\n        this._engineId = null;\n        this.parent = _parent;\n    }\n    Object.defineProperty(Entity.prototype, \"engineId\", {\n        get: function () {\n            return this._engineId;\n        },\n        set: function (value) {\n            if (value === this._engineId)\n                return;\n            if (value !== null && this._engineId === null) {\n                this._engineId = value;\n            }\n            else if (value === null && this._engineId !== null) {\n                this.parent = null;\n                this._engineId = null;\n            }\n            else {\n                throw new Error('Entity#setEngineId: Cannot change the engineId on the fly. The entity must be removed from the engine first.');\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Entity.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        set: function (entity) {\n            if (this.parent && this.engineId !== null) {\n                delete this.parent.children[this.engineId];\n            }\n            this._parent = entity || null;\n            this.registerAsChild();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Entity.prototype.set = function (component) {\n        var componentName = Component_1.getComponentName(component);\n        if (this.components[componentName]) {\n            this.components[componentName] = component;\n        }\n        else {\n            this.add(component);\n        }\n    };\n    Entity.prototype.has = function (component) {\n        var componentName = Component_1.getComponentName(component);\n        return !!this.components[componentName];\n    };\n    Entity.prototype.get = function (component) {\n        var componentName = typeof component === 'string' ? component : Component_1.getComponentName(component);\n        if (!this.components[componentName]) {\n            throw new Error(\"Entity has no component \" + componentName);\n        }\n        return this.components[componentName];\n    };\n    Entity.prototype.getOrNull = function (component) {\n        var componentName = typeof component === 'string' ? component : Component_1.getComponentName(component);\n        return this.components[componentName] || null;\n    };\n    Entity.prototype.add = function (component) {\n        var componentName = Component_1.getComponentName(component);\n        if (this.components[componentName]) {\n            throw new Error(\"There is already a component of type \\\"\" + componentName + \"\\\" in this entity.\");\n        }\n        this.components[componentName] = component;\n        if (this.eventManager) {\n            this.eventManager.fireEvent(new ComponentAdded(this, componentName));\n        }\n    };\n    Entity.prototype.addOrReplace = function (component) {\n        var componentName = Component_1.getComponentName(component);\n        this.components[componentName] = component;\n        if (this.eventManager) {\n            this.eventManager.fireEvent(new ComponentAdded(this, componentName));\n        }\n    };\n    Entity.prototype.remove = function (component) {\n        var componentName = Component_1.getComponentName(component);\n        if (this.components[componentName]) {\n            delete this.components[componentName];\n        }\n        else {\n            Engine_1.log(\"Entity: Trying to remove unexisting component \" + componentName + \" please fix this\");\n        }\n        if (this.eventManager) {\n            this.eventManager.fireEvent(new ComponentRemoved(this, componentName));\n        }\n    };\n    Entity.prototype.registerAsChild = function () {\n        if (this.engineId && this.parent) {\n            this.parent.children[this.engineId] = this;\n        }\n    };\n    return Entity;\n}());\nexports.Entity = Entity;\n/**\n * @public\n */\nvar ComponentRemoved = /** @class */ (function () {\n    function ComponentRemoved(entity, componentName) {\n        this.entity = entity;\n        this.componentName = componentName;\n        // stub\n    }\n    ComponentRemoved = __decorate([\n        EventManager_1.EventConstructor('dcl-component-removed'),\n        __metadata(\"design:paramtypes\", [Entity, String])\n    ], ComponentRemoved);\n    return ComponentRemoved;\n}());\nexports.ComponentRemoved = ComponentRemoved;\n/**\n * @public\n */\nvar ComponentAdded = /** @class */ (function () {\n    function ComponentAdded(entity, componentName) {\n        this.entity = entity;\n        this.componentName = componentName;\n        // stub\n    }\n    ComponentAdded = __decorate([\n        EventManager_1.EventConstructor('dcl-component-added'),\n        __metadata(\"design:paramtypes\", [Entity, String])\n    ], ComponentAdded);\n    return ComponentAdded;\n}());\nexports.ComponentAdded = ComponentAdded;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW50aXR5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Vjcy9FbnRpdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx5Q0FBb0U7QUFDcEUsbUNBQThCO0FBQzlCLCtDQUErRDtBQUMvRCxxQ0FBZ0M7QUFFaEMsdUNBQXVDO0FBRXZDOztHQUVHO0FBQ0g7SUF5Q0UsZ0JBQVksT0FBNkIsRUFBUyxJQUFhO1FBQW5ELHdCQUFBLEVBQUEsY0FBNkI7UUFBUyxTQUFJLEdBQUosSUFBSSxDQUFTO1FBeEN4RCxhQUFRLEdBQTJCLEVBQUUsQ0FBQTtRQUNyQyxpQkFBWSxHQUF3QixJQUFJLENBQUE7UUFDeEMsVUFBSyxHQUFZLEtBQUssQ0FBQTtRQUViLFNBQUksR0FBVyxjQUFJLEVBQUUsQ0FBQTtRQUNyQixlQUFVLEdBQXdCLEVBQUUsQ0FBQTtRQUU1QyxZQUFPLEdBQWtCLElBQUksQ0FBQTtRQUM3QixjQUFTLEdBQWtCLElBQUksQ0FBQTtRQWlDckMsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUE7SUFDdkIsQ0FBQztJQWhDRCxzQkFBVyw0QkFBUTthQUFuQjtZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQTtRQUN2QixDQUFDO2FBRUQsVUFBb0IsS0FBb0I7WUFDdEMsSUFBSSxLQUFLLEtBQUssSUFBSSxDQUFDLFNBQVM7Z0JBQUUsT0FBTTtZQUNwQyxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJLEVBQUU7Z0JBQzdDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFBO2FBQ3ZCO2lCQUFNLElBQUksS0FBSyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLElBQUksRUFBRTtnQkFDcEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUE7Z0JBQ2xCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFBO2FBQ3RCO2lCQUFNO2dCQUNMLE1BQU0sSUFBSSxLQUFLLENBQ2IsOEdBQThHLENBQy9HLENBQUE7YUFDRjtRQUNILENBQUM7OztPQWRBO0lBZ0JELHNCQUFXLDBCQUFNO2FBUWpCO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFBO1FBQ3JCLENBQUM7YUFWRCxVQUFrQixNQUFxQjtZQUNyQyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLFFBQVEsS0FBSyxJQUFJLEVBQUU7Z0JBQ3pDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO2FBQzNDO1lBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLElBQUksSUFBSSxDQUFBO1lBQzdCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQTtRQUN4QixDQUFDOzs7T0FBQTtJQVVELG9CQUFHLEdBQUgsVUFBc0IsU0FBWTtRQUNoQyxJQUFNLGFBQWEsR0FBRyw0QkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNqRCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDbEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsR0FBRyxTQUFTLENBQUE7U0FDM0M7YUFBTTtZQUNMLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUE7U0FDcEI7SUFDSCxDQUFDO0lBRUQsb0JBQUcsR0FBSCxVQUFJLFNBQW9DO1FBQ3RDLElBQU0sYUFBYSxHQUFHLDRCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ2pELE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDekMsQ0FBQztJQUlELG9CQUFHLEdBQUgsVUFBTyxTQUEyQztRQUNoRCxJQUFNLGFBQWEsR0FBRyxPQUFPLFNBQVMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsNEJBQWdCLENBQUMsU0FBUyxDQUFDLENBQUE7UUFFN0YsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDbkMsTUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBMkIsYUFBZSxDQUFDLENBQUE7U0FDNUQ7UUFFRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDdkMsQ0FBQztJQUlELDBCQUFTLEdBQVQsVUFBYSxTQUEyQztRQUN0RCxJQUFNLGFBQWEsR0FBRyxPQUFPLFNBQVMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsNEJBQWdCLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDN0YsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxJQUFJLElBQUksQ0FBQTtJQUMvQyxDQUFDO0lBRUQsb0JBQUcsR0FBSCxVQUFzQixTQUFZO1FBQ2hDLElBQU0sYUFBYSxHQUFHLDRCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBRWpELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUNsQyxNQUFNLElBQUksS0FBSyxDQUFDLDRDQUF5QyxhQUFhLHVCQUFtQixDQUFDLENBQUE7U0FDM0Y7UUFFRCxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxHQUFHLFNBQVMsQ0FBQTtRQUUxQyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsSUFBSSxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUE7U0FDckU7SUFDSCxDQUFDO0lBRUQsNkJBQVksR0FBWixVQUErQixTQUFZO1FBQ3pDLElBQU0sYUFBYSxHQUFHLDRCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBRWpELElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLEdBQUcsU0FBUyxDQUFBO1FBRTFDLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNyQixJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQTtTQUNyRTtJQUNILENBQUM7SUFFRCx1QkFBTSxHQUFOLFVBQXlCLFNBQVk7UUFDbkMsSUFBTSxhQUFhLEdBQUcsNEJBQWdCLENBQUMsU0FBUyxDQUFDLENBQUE7UUFFakQsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQ2xDLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQTtTQUN0QzthQUFNO1lBQ0wsWUFBRyxDQUFDLG1EQUFpRCxhQUFhLHFCQUFrQixDQUFDLENBQUE7U0FDdEY7UUFFRCxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQTtTQUN2RTtJQUNILENBQUM7SUFFRCxnQ0FBZSxHQUFmO1FBQ0UsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQTtTQUMzQztJQUNILENBQUM7SUFDSCxhQUFDO0FBQUQsQ0FBQyxBQXpIRCxJQXlIQztBQXpIWSx3QkFBTTtBQTJIbkI7O0dBRUc7QUFFSDtJQUNFLDBCQUFtQixNQUFjLEVBQVMsYUFBcUI7UUFBNUMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFTLGtCQUFhLEdBQWIsYUFBYSxDQUFRO1FBQzdELE9BQU87SUFDVCxDQUFDO0lBSFUsZ0JBQWdCO1FBRDVCLCtCQUFnQixDQUFDLHVCQUF1QixDQUFDO3lDQUViLE1BQU07T0FEdEIsZ0JBQWdCLENBSTVCO0lBQUQsdUJBQUM7Q0FBQSxBQUpELElBSUM7QUFKWSw0Q0FBZ0I7QUFNN0I7O0dBRUc7QUFFSDtJQUNFLHdCQUFtQixNQUFjLEVBQVMsYUFBcUI7UUFBNUMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFTLGtCQUFhLEdBQWIsYUFBYSxDQUFRO1FBQzdELE9BQU87SUFDVCxDQUFDO0lBSFUsY0FBYztRQUQxQiwrQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQzt5Q0FFWCxNQUFNO09BRHRCLGNBQWMsQ0FJMUI7SUFBRCxxQkFBQztDQUFBLEFBSkQsSUFJQztBQUpZLHdDQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29tcG9uZW50TmFtZSwgQ29tcG9uZW50Q29uc3RydWN0b3IgfSBmcm9tICcuL0NvbXBvbmVudCdcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4vRW5naW5lJ1xuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyLCBFdmVudENvbnN0cnVjdG9yIH0gZnJvbSAnLi9FdmVudE1hbmFnZXInXG5pbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi9oZWxwZXJzJ1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby11c2UtYmVmb3JlLWRlY2xhcmVcblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBFbnRpdHkge1xuICBwdWJsaWMgY2hpbGRyZW46IFJlY29yZDxzdHJpbmcsIEVudGl0eT4gPSB7fVxuICBwdWJsaWMgZXZlbnRNYW5hZ2VyOiBFdmVudE1hbmFnZXIgfCBudWxsID0gbnVsbFxuICBwdWJsaWMgYWxpdmU6IGJvb2xlYW4gPSBmYWxzZVxuXG4gIHB1YmxpYyByZWFkb25seSB1dWlkOiBzdHJpbmcgPSB1dWlkKClcbiAgcHVibGljIHJlYWRvbmx5IGNvbXBvbmVudHM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuXG4gIHByaXZhdGUgX3BhcmVudDogRW50aXR5IHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBfZW5naW5lSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cbiAgcHVibGljIGdldCBlbmdpbmVJZCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fZW5naW5lSWRcbiAgfVxuXG4gIHB1YmxpYyBzZXQgZW5naW5lSWQodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodmFsdWUgPT09IHRoaXMuX2VuZ2luZUlkKSByZXR1cm5cbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdGhpcy5fZW5naW5lSWQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2VuZ2luZUlkID0gdmFsdWVcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBudWxsICYmIHRoaXMuX2VuZ2luZUlkICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IG51bGxcbiAgICAgIHRoaXMuX2VuZ2luZUlkID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdFbnRpdHkjc2V0RW5naW5lSWQ6IENhbm5vdCBjaGFuZ2UgdGhlIGVuZ2luZUlkIG9uIHRoZSBmbHkuIFRoZSBlbnRpdHkgbXVzdCBiZSByZW1vdmVkIGZyb20gdGhlIGVuZ2luZSBmaXJzdC4nXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldCBwYXJlbnQoZW50aXR5OiBFbnRpdHkgfCBudWxsKSB7XG4gICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMuZW5naW5lSWQgIT09IG51bGwpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnBhcmVudC5jaGlsZHJlblt0aGlzLmVuZ2luZUlkXVxuICAgIH1cbiAgICB0aGlzLl9wYXJlbnQgPSBlbnRpdHkgfHwgbnVsbFxuICAgIHRoaXMucmVnaXN0ZXJBc0NoaWxkKClcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcGFyZW50KCk6IEVudGl0eSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLl9wYXJlbnRcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKF9wYXJlbnQ6IEVudGl0eSB8IG51bGwgPSBudWxsLCBwdWJsaWMgbmFtZT86IHN0cmluZykge1xuICAgIHRoaXMucGFyZW50ID0gX3BhcmVudFxuICB9XG5cbiAgc2V0PFQgZXh0ZW5kcyBvYmplY3Q+KGNvbXBvbmVudDogVCkge1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudClcbiAgICBpZiAodGhpcy5jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gPSBjb21wb25lbnRcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGQoY29tcG9uZW50KVxuICAgIH1cbiAgfVxuXG4gIGhhcyhjb21wb25lbnQ6IENvbXBvbmVudENvbnN0cnVjdG9yPGFueT4pOiBib29sZWFuIHtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnQpXG4gICAgcmV0dXJuICEhdGhpcy5jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdXG4gIH1cblxuICBnZXQ8VCA9IGFueT4oY29tcG9uZW50OiBzdHJpbmcpOiBUXG4gIGdldDxUPihjb21wb25lbnQ6IENvbXBvbmVudENvbnN0cnVjdG9yPFQ+KTogVFxuICBnZXQ8VD4oY29tcG9uZW50OiBDb21wb25lbnRDb25zdHJ1Y3RvcjxUPiB8IHN0cmluZyk6IFQge1xuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSB0eXBlb2YgY29tcG9uZW50ID09PSAnc3RyaW5nJyA/IGNvbXBvbmVudCA6IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50KVxuXG4gICAgaWYgKCF0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRW50aXR5IGhhcyBubyBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfWApXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29tcG9uZW50c1tjb21wb25lbnROYW1lXVxuICB9XG5cbiAgZ2V0T3JOdWxsPFQgPSBhbnk+KGNvbXBvbmVudDogc3RyaW5nKTogVCB8IG51bGxcbiAgZ2V0T3JOdWxsPFQ+KGNvbXBvbmVudDogQ29tcG9uZW50Q29uc3RydWN0b3I8VD4pOiBUIHwgbnVsbFxuICBnZXRPck51bGw8VD4oY29tcG9uZW50OiBDb21wb25lbnRDb25zdHJ1Y3RvcjxUPiB8IHN0cmluZyk6IFQgfCBudWxsIHtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gdHlwZW9mIGNvbXBvbmVudCA9PT0gJ3N0cmluZycgPyBjb21wb25lbnQgOiBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudClcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdIHx8IG51bGxcbiAgfVxuXG4gIGFkZDxUIGV4dGVuZHMgb2JqZWN0Pihjb21wb25lbnQ6IFQpIHtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnQpXG5cbiAgICBpZiAodGhpcy5jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIGFscmVhZHkgYSBjb21wb25lbnQgb2YgdHlwZSBcIiR7Y29tcG9uZW50TmFtZX1cIiBpbiB0aGlzIGVudGl0eS5gKVxuICAgIH1cblxuICAgIHRoaXMuY29tcG9uZW50c1tjb21wb25lbnROYW1lXSA9IGNvbXBvbmVudFxuXG4gICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2VyKSB7XG4gICAgICB0aGlzLmV2ZW50TWFuYWdlci5maXJlRXZlbnQobmV3IENvbXBvbmVudEFkZGVkKHRoaXMsIGNvbXBvbmVudE5hbWUpKVxuICAgIH1cbiAgfVxuXG4gIGFkZE9yUmVwbGFjZTxUIGV4dGVuZHMgb2JqZWN0Pihjb21wb25lbnQ6IFQpIHtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnQpXG5cbiAgICB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50TmFtZV0gPSBjb21wb25lbnRcblxuICAgIGlmICh0aGlzLmV2ZW50TWFuYWdlcikge1xuICAgICAgdGhpcy5ldmVudE1hbmFnZXIuZmlyZUV2ZW50KG5ldyBDb21wb25lbnRBZGRlZCh0aGlzLCBjb21wb25lbnROYW1lKSlcbiAgICB9XG4gIH1cblxuICByZW1vdmU8VCBleHRlbmRzIG9iamVjdD4oY29tcG9uZW50OiBUKSB7XG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50KVxuXG4gICAgaWYgKHRoaXMuY29tcG9uZW50c1tjb21wb25lbnROYW1lXSkge1xuICAgICAgZGVsZXRlIHRoaXMuY29tcG9uZW50c1tjb21wb25lbnROYW1lXVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2coYEVudGl0eTogVHJ5aW5nIHRvIHJlbW92ZSB1bmV4aXN0aW5nIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9IHBsZWFzZSBmaXggdGhpc2ApXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2VyKSB7XG4gICAgICB0aGlzLmV2ZW50TWFuYWdlci5maXJlRXZlbnQobmV3IENvbXBvbmVudFJlbW92ZWQodGhpcywgY29tcG9uZW50TmFtZSkpXG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJBc0NoaWxkKCkge1xuICAgIGlmICh0aGlzLmVuZ2luZUlkICYmIHRoaXMucGFyZW50KSB7XG4gICAgICB0aGlzLnBhcmVudC5jaGlsZHJlblt0aGlzLmVuZ2luZUlkXSA9IHRoaXNcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBFdmVudENvbnN0cnVjdG9yKCdkY2wtY29tcG9uZW50LXJlbW92ZWQnKVxuZXhwb3J0IGNsYXNzIENvbXBvbmVudFJlbW92ZWQge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgZW50aXR5OiBFbnRpdHksIHB1YmxpYyBjb21wb25lbnROYW1lOiBzdHJpbmcpIHtcbiAgICAvLyBzdHViXG4gIH1cbn1cblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbkBFdmVudENvbnN0cnVjdG9yKCdkY2wtY29tcG9uZW50LWFkZGVkJylcbmV4cG9ydCBjbGFzcyBDb21wb25lbnRBZGRlZCB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBlbnRpdHk6IEVudGl0eSwgcHVibGljIGNvbXBvbmVudE5hbWU6IHN0cmluZykge1xuICAgIC8vIHN0dWJcbiAgfVxufVxuIl19\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/ecs/Entity.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/ecs/EventManager.ts":
    /*!***********************************************************!*\
      !*** ./packages/decentraland-ecs/src/ecs/EventManager.ts ***!
      \***********************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Engine_1 = __webpack_require__(/*! ./Engine */ \"./packages/decentraland-ecs/src/ecs/Engine.ts\");\nvar eventNameSymbol = '__event_name__';\nvar takenEventNames = [];\nfunction getEventNameFromConstructor(ctor) {\n    if (!(eventNameSymbol in ctor) || typeof ctor[eventNameSymbol] !== 'string') {\n        throw new Error('The EventConstructor is not registered');\n    }\n    return ctor[eventNameSymbol];\n}\n/**\n * @public\n */\nvar EventManager = /** @class */ (function () {\n    function EventManager() {\n        this.listeners = {};\n    }\n    EventManager.prototype.addListener = function (eventClass, listener, listenerFunction) {\n        if (!eventClass || typeof eventClass !== 'function') {\n            throw new Error('Invalid EventConstructor');\n        }\n        var eventName = getEventNameFromConstructor(eventClass);\n        var listeners = this.listeners[eventName];\n        if (!listeners) {\n            listeners = this.listeners[eventName] = [];\n        }\n        for (var i = 0; i < listeners.length; i++) {\n            var x = listeners[i];\n            if (x.listener === listener) {\n                throw new Error('The provided listener is already registered');\n            }\n        }\n        listeners.push({\n            listener: listener,\n            fn: listenerFunction\n        });\n    };\n    EventManager.prototype.removeListener = function (listener, eventClass) {\n        if (!eventClass || typeof eventClass !== 'function') {\n            throw new Error('Invalid EventConstructor');\n        }\n        var eventName = getEventNameFromConstructor(eventClass);\n        var listeners = this.listeners[eventName];\n        if (!listeners) {\n            return false;\n        }\n        for (var i = 0; i < listeners.length; i++) {\n            var x = listeners[i];\n            if (x.listener === listener) {\n                listeners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventManager.prototype.fireEvent = function (event) {\n        var eventName = getEventNameFromConstructor(event.constructor);\n        var listeners = this.listeners[eventName];\n        if (listeners) {\n            for (var i = 0; i < listeners.length; i++) {\n                try {\n                    var l = listeners[i];\n                    l.fn.call(l.listener, event);\n                }\n                catch (e) {\n                    Engine_1.log(e);\n                }\n            }\n        }\n    };\n    return EventManager;\n}());\nexports.EventManager = EventManager;\n/**\n * @public\n */\nfunction EventConstructor(eventName) {\n    if (!eventName || typeof eventName !== 'string') {\n        throw new Error(\"Invalid event name \" + eventName);\n    }\n    if (takenEventNames.indexOf(eventName) !== -1) {\n        throw new Error(\"The event name \" + eventName + \" is already taken\");\n    }\n    takenEventNames.push(eventName);\n    return function (target) {\n        target[eventNameSymbol] = eventName;\n        return target;\n    };\n}\nexports.EventConstructor = EventConstructor;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXZlbnRNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Vjcy9FdmVudE1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtQ0FBOEI7QUFFOUIsSUFBTSxlQUFlLEdBQUcsZ0JBQWdCLENBQUE7QUFXeEMsSUFBTSxlQUFlLEdBQWEsRUFBRSxDQUFBO0FBRXBDLFNBQVMsMkJBQTJCLENBQUksSUFBMEI7SUFDaEUsSUFBSSxDQUFDLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQyxJQUFJLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLFFBQVEsRUFBRTtRQUMzRSxNQUFNLElBQUksS0FBSyxDQUFDLHdDQUF3QyxDQUFDLENBQUE7S0FDMUQ7SUFDRCxPQUFRLElBQUksQ0FBQyxlQUFlLENBQW1CLENBQUE7QUFDakQsQ0FBQztBQUVEOztHQUVHO0FBQ0g7SUFBQTtRQUNVLGNBQVMsR0FBdUUsRUFBRSxDQUFBO0lBbUU1RixDQUFDO0lBakVDLGtDQUFXLEdBQVgsVUFBa0IsVUFBZ0MsRUFBRSxRQUFXLEVBQUUsZ0JBQTZDO1FBQzVHLElBQUksQ0FBQyxVQUFVLElBQUksT0FBUSxVQUFrQixLQUFLLFVBQVUsRUFBRTtZQUM1RCxNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUE7U0FDNUM7UUFDRCxJQUFNLFNBQVMsR0FBRywyQkFBMkIsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUV6RCxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBRXpDLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDZCxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUE7U0FDM0M7UUFFRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN6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bWVTeW1ib2wgPSAnX19ldmVudF9uYW1lX18nXG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElFdmVudENvbnN0cnVjdG9yPFQ+IHtcbiAgLy8gQGludGVybmFsXG4gIFtldmVudE5hbWVTeW1ib2xdPzogc3RyaW5nXG4gIG5ldyAoLi4uYXJnczogYW55W10pOiBUXG59XG5cbmNvbnN0IHRha2VuRXZlbnROYW1lczogc3RyaW5nW10gPSBbXVxuXG5mdW5jdGlvbiBnZXRFdmVudE5hbWVGcm9tQ29uc3RydWN0b3I8VD4oY3RvcjogSUV2ZW50Q29uc3RydWN0b3I8VD4pOiBzdHJpbmcge1xuICBpZiAoIShldmVudE5hbWVTeW1ib2wgaW4gY3RvcikgfHwgdHlwZW9mIGN0b3JbZXZlbnROYW1lU3ltYm9sXSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBFdmVudENvbnN0cnVjdG9yIGlzIG5vdCByZWdpc3RlcmVkJylcbiAgfVxuICByZXR1cm4gKGN0b3JbZXZlbnROYW1lU3ltYm9sXSBhcyBhbnkpIGFzIHN0cmluZ1xufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50TWFuYWdlciB7XG4gIHByaXZhdGUgbGlzdGVuZXJzOiBSZWNvcmQ8c3RyaW5nLCBBcnJheTx7IGxpc3RlbmVyOiBhbnk7IGZuOiAoZXZlbnQ6IGFueSkgPT4gdm9pZCB9Pj4gPSB7fVxuXG4gIGFkZExpc3RlbmVyPFQsIFg+KGV2ZW50Q2xhc3M6IElFdmVudENvbnN0cnVjdG9yPFQ+LCBsaXN0ZW5lcjogWCwgbGlzdGVuZXJGdW5jdGlvbjogKHRoaXM6IFgsIGV2ZW50OiBUKSA9PiB2b2lkKSB7XG4gICAgaWYgKCFldmVudENsYXNzIHx8IHR5cGVvZiAoZXZlbnRDbGFzcyBhcyBhbnkpICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgRXZlbnRDb25zdHJ1Y3RvcicpXG4gICAgfVxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGdldEV2ZW50TmFtZUZyb21Db25zdHJ1Y3RvcihldmVudENsYXNzKVxuXG4gICAgbGV0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV1cblxuICAgIGlmICghbGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdID0gW11cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgeCA9IGxpc3RlbmVyc1tpXVxuICAgICAgaWYgKHgubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb3ZpZGVkIGxpc3RlbmVyIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLnB1c2goe1xuICAgICAgbGlzdGVuZXIsXG4gICAgICBmbjogbGlzdGVuZXJGdW5jdGlvblxuICAgIH0pXG4gIH1cblxuICByZW1vdmVMaXN0ZW5lcjxYPihsaXN0ZW5lcjogWCwgZXZlbnRDbGFzczogSUV2ZW50Q29uc3RydWN0b3I8YW55Pik6IGJvb2xlYW4ge1xuICAgIGlmICghZXZlbnRDbGFzcyB8fCB0eXBlb2YgKGV2ZW50Q2xhc3MgYXMgYW55KSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEV2ZW50Q29uc3RydWN0b3InKVxuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGdldEV2ZW50TmFtZUZyb21Db25zdHJ1Y3RvcihldmVudENsYXNzKVxuXG4gICAgbGV0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV1cblxuICAgIGlmICghbGlzdGVuZXJzKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgeCA9IGxpc3RlbmVyc1tpXVxuICAgICAgaWYgKHgubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaSwgMSlcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZpcmVFdmVudDxUIGV4dGVuZHMgb2JqZWN0PihldmVudDogVCkge1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGdldEV2ZW50TmFtZUZyb21Db25zdHJ1Y3RvcigoZXZlbnQgYXMgYW55KS5jb25zdHJ1Y3RvcilcblxuICAgIGxldCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdXG5cbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGwgPSBsaXN0ZW5lcnNbaV1cbiAgICAgICAgICBsLmZuLmNhbGwobC5saXN0ZW5lciwgZXZlbnQpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2coZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEV2ZW50Q29uc3RydWN0b3IoZXZlbnROYW1lOiBzdHJpbmcpIHtcbiAgaWYgKCFldmVudE5hbWUgfHwgdHlwZW9mIChldmVudE5hbWUgYXMgYW55KSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZXZlbnQgbmFtZSAke2V2ZW50TmFtZX1gKVxuICB9XG5cbiAgaWYgKHRha2VuRXZlbnROYW1lcy5pbmRleE9mKGV2ZW50TmFtZSkgIT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZXZlbnQgbmFtZSAke2V2ZW50TmFtZX0gaXMgYWxyZWFkeSB0YWtlbmApXG4gIH1cblxuICB0YWtlbkV2ZW50TmFtZXMucHVzaChldmVudE5hbWUpXG5cbiAgcmV0dXJuIDxcbiAgICBURnVuY3Rpb24gZXh0ZW5kcyBGdW5jdGlvbiAmIHtcbiAgICAgIC8vIEBpbnRlcm5hbFxuICAgICAgW2V2ZW50TmFtZVN5bWJvbF0/OiBzdHJpbmdcbiAgICB9XG4gID4oXG4gICAgdGFyZ2V0OiBURnVuY3Rpb25cbiAgKTogVEZ1bmN0aW9uID0+IHtcbiAgICB0YXJnZXRbZXZlbnROYW1lU3ltYm9sXSA9IGV2ZW50TmFtZVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxufVxuIl19\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/ecs/EventManager.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/ecs/System.ts":
    /*!*****************************************************!*\
      !*** ./packages/decentraland-ecs/src/ecs/System.ts ***!
      \*****************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Component_1 = __webpack_require__(/*! ./Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\");\n/**\n * @public\n */\nvar System = /** @class */ (function () {\n    function System() {\n        this.entities = {};\n        this.active = false;\n    }\n    System.prototype.hasEntity = function (entity) {\n        if (!entity.engineId)\n            return false;\n        return !!this.entities[entity.engineId];\n    };\n    System.prototype.addEntity = function (entity) {\n        if (!entity.engineId) {\n            throw new TypeError('System: Cannot add a entity that is not added to the engine');\n        }\n        var wasPresent = !!this.entities[entity.engineId];\n        this.entities[entity.engineId] = entity;\n        if (!wasPresent && this.onAddEntity) {\n            this.onAddEntity(entity);\n        }\n    };\n    System.prototype.removeEntity = function (entity) {\n        var id = entity.engineId;\n        var wasPresent = false;\n        if (id) {\n            wasPresent = delete this.entities[id];\n        }\n        else {\n            for (var id_1 in this.entities) {\n                if (this.entities[id_1] === entity) {\n                    wasPresent = true;\n                    delete this.entities[id_1];\n                }\n            }\n        }\n        if (wasPresent && this.onRemoveEntity) {\n            this.onRemoveEntity(entity);\n        }\n    };\n    System.prototype.meetsRequirements = function (_) {\n        return true;\n    };\n    return System;\n}());\nexports.System = System;\n/**\n * @public\n */\nvar ComponentSystem = /** @class */ (function (_super) {\n    __extends(ComponentSystem, _super);\n    function ComponentSystem() {\n        var requires = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            requires[_i] = arguments[_i];\n        }\n        var _this = _super.call(this) || this;\n        _this._requires = [];\n        _this._requiresNames = [];\n        // validate requires list\n        if (!_this.requires) {\n            throw new Error('ComponentSystem: Could not load the requires list');\n        }\n        if (!(_this.requires instanceof Array)) {\n            throw new Error('ComponentSystem: requires list is not an Array');\n        }\n        _this._requires = requires;\n        _this._requires.forEach(function (component, ix) {\n            var name = null;\n            if (!component) {\n                throw new Error(\"ComponentSystem: the required component at location \" + ix + \" is invalid\");\n            }\n            try {\n                name = Component_1.getComponentName(component);\n            }\n            catch (e) {\n                throw new Error(\"ComponentSystem: the required component at location \" + ix + \" is not registered. Remember to pass the class of the component, not the name\");\n            }\n            if (_this._requiresNames.some(function ($) { return $ === name; })) {\n                throw new Error(\"ComponentSystem: the required component list has a repeated name \" + name);\n            }\n            _this._requiresNames.push(name);\n        });\n        return _this;\n    }\n    Object.defineProperty(ComponentSystem.prototype, \"requiresNames\", {\n        get: function () {\n            return this._requiresNames.slice();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentSystem.prototype, \"requires\", {\n        get: function () {\n            return this._requires.slice();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ComponentSystem.prototype.componentRemoved = function (entity, component) {\n        if (this._requiresNames.indexOf(component) !== -1) {\n            this.removeEntity(entity);\n        }\n    };\n    ComponentSystem.prototype.meetsRequirements = function (entity) {\n        for (var i = 0; i < this._requiresNames.length; i++) {\n            var componentName = this._requiresNames[i];\n            if (!(componentName in entity.components)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    return ComponentSystem;\n}(System));\nexports.ComponentSystem = ComponentSystem;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3lzdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Vjcy9TeXN0ZW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EseUNBQW9FO0FBbUJwRTs7R0FFRztBQUNIO0lBQUE7UUFDVyxhQUFRLEdBQXdCLEVBQUUsQ0FBQTtRQUMzQyxXQUFNLEdBQVksS0FBSyxDQUFBO0lBa0R6QixDQUFDO0lBNUNDLDBCQUFTLEdBQVQsVUFBVSxNQUFjO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUTtZQUFFLE9BQU8sS0FBSyxDQUFBO1FBRWxDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFRCwwQkFBUyxHQUFULFVBQVUsTUFBYztRQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTtZQUNwQixNQUFNLElBQUksU0FBUyxDQUFDLDZEQUE2RCxDQUFDLENBQUE7U0FDbkY7UUFFRCxJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUE7UUFFakQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsTUFBTSxDQUFBO1FBRXZDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNuQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1NBQ3pCO0lBQ0gsQ0FBQztJQUVELDZCQUFZLEdBQVosVUFBYSxNQUFjO1FBQ3pCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUE7UUFFMUIsSUFBSSxVQUFVLEdBQUcsS0FBSyxDQUFBO1FBRXRCLElBQUksRUFBRSxFQUFFO1lBQ04sVUFBVSxHQUFHLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQTtTQUN0QzthQUFNO1lBQ0wsS0FBSyxJQUFJLElBQUUsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBRSxDQUFDLEtBQUssTUFBTSxFQUFFO29CQUNoQyxVQUFVLEdBQUcsSUFBSSxDQUFBO29CQUNqQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBRSxDQUFDLENBQUE7aUJBQ3pCO2FBQ0Y7U0FDRjtRQUVELElBQUksVUFBVSxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDckMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUM1QjtJQUNILENBQUM7SUFFRCxrQ0FBaUIsR0FBakIsVUFBa0IsQ0FBUztRQUN6QixPQUFPLElBQUksQ0FBQTtJQUNiLENBQUM7SUFDSCxhQUFDO0FBQUQsQ0FBQyxBQXBERCxJQW9EQztBQXBEWSx3QkFBTTtBQXNEbkI7O0dBRUc7QUFDSDtJQUFxQyxtQ0FBTTtJQVl6QztRQUFZLGtCQUF3QzthQUF4QyxVQUF3QyxFQUF4QyxxQkFBd0MsRUFBeEMsSUFBd0M7WUFBeEMsNkJBQXdDOztRQUFwRCxZQUNFLGlCQUFPLFNBOEJSO1FBMUNPLGVBQVMsR0FBZ0MsRUFBRSxDQUFBO1FBQzNDLG9CQUFjLEdBQWEsRUFBRSxDQUFBO1FBWW5DLHlCQUF5QjtRQUN6QixJQUFJLENBQUMsS0FBSSxDQUFDLFFBQVEsRUFBRTtZQUNsQixNQUFNLElBQUksS0FBSyxDQUFDLG1EQUFtRCxDQUFDLENBQUE7U0FDckU7UUFDRCxJQUFJLENBQUMsQ0FBQyxLQUFJLENBQUMsUUFBUSxZQUFZLEtBQUssQ0FBQyxFQUFFO1lBQ3JDLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0RBQWdELENBQUMsQ0FBQTtTQUNsRTtRQUNELEtBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFBO1FBQ3pCLEtBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQUMsU0FBUyxFQUFFLEVBQUU7WUFDbkMsSUFBSSxJQUFJLEdBQWtCLElBQUksQ0FBQTtZQUU5QixJQUFJLENBQUMsU0FBUyxFQUFFO2dCQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMseURBQXVELEVBQUUsZ0JBQWEsQ0FBQyxDQUFBO2FBQ3hGO1lBRUQsSUFBSTtnQkFDRixJQUFJLEdBQUcsNEJBQWdCLENBQUMsU0FBUyxDQUFDLENBQUE7YUFDbkM7WUFBQyxPQUFPLENBQUMsRUFBRTtnQkFDVixNQUFNLElBQUksS0FBSyxDQUNiLHlEQUF1RCxFQUFFLGtGQUErRSxDQUN6SSxDQUFBO2FBQ0Y7WUFFRCxJQUFJLEtBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxLQUFLLElBQUksRUFBVixDQUFVLENBQUMsRUFBRTtnQkFDN0MsTUFBTSxJQUFJLEtBQUssQ0FBQyxzRUFBb0UsSUFBTSxDQUFDLENBQUE7YUFDNUY7WUFFRCxLQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNoQyxDQUFDLENBQUMsQ0FBQTs7SUFDSixDQUFDO0lBdkNELHNCQUFJLDBDQUFhO2FBQWpCO1lBQ0UsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3BDLENBQUM7OztPQUFBO0lBRUQsc0JBQUkscUNBQVE7YUFBWjtZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUMvQixDQUFDOzs7T0FBQTtJQW1DRCwwQ0FBZ0IsR0FBaEIsVUFBaUIsTUFBYyxFQUFFLFNBQWlCO1FBQ2hELElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDakQsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUMxQjtJQUNILENBQUM7SUFFRCwyQ0FBaUIsR0FBakIsVUFBa0IsTUFBYztRQUM5QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkQsSUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUM1QyxJQUFJLENBQUMsQ0FBQyxhQUFhLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFO2dCQUN6QyxPQUFPLEtBQUssQ0FBQTthQUNiO1NBQ0Y7UUFDRCxPQUFPLElBQUksQ0FBQTtJQUNiLENBQUM7SUFDSCxzQkFBQztBQUFELENBQUMsQUE1REQsQ0FBcUMsTUFBTSxHQTREMUM7QUE1RFksMENBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSdcbmltcG9ydCB7IGdldENvbXBvbmVudE5hbWUsIENvbXBvbmVudENvbnN0cnVjdG9yIH0gZnJvbSAnLi9Db21wb25lbnQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuL0VuZ2luZSdcblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVN5c3RlbSB7XG4gIGFjdGl2ZTogYm9vbGVhblxuICBhY3RpdmF0ZT8oZW5naW5lOiBFbmdpbmUpOiB2b2lkXG4gIGhhc0VudGl0eShlbnRpdHk6IEVudGl0eSk6IGJvb2xlYW5cbiAgb25BZGRFbnRpdHk/KGVudGl0eTogRW50aXR5KTogdm9pZFxuICBvblJlbW92ZUVudGl0eT8oZW50aXR5OiBFbnRpdHkpOiB2b2lkXG4gIHVwZGF0ZT8oZGVsdGFUaW1lOiBudW1iZXIpOiB2b2lkXG4gIGRyYXc/KCk6IHZvaWRcbiAgYWRkRW50aXR5KGVudGl0eTogRW50aXR5LCBjb21wb25lbnQ/OiBzdHJpbmcpOiB2b2lkXG4gIHJlbW92ZUVudGl0eShlbnRpdHk6IEVudGl0eSk6IHZvaWRcbiAgbWVldHNSZXF1aXJlbWVudHMoZW50aXR5OiBFbnRpdHkpOiBib29sZWFuXG59XG5cbi8qKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtIGltcGxlbWVudHMgSVN5c3RlbSB7XG4gIHJlYWRvbmx5IGVudGl0aWVzOiBSZWNvcmQ8YW55LCBFbnRpdHk+ID0ge31cbiAgYWN0aXZlOiBib29sZWFuID0gZmFsc2VcblxuICBhY3RpdmF0ZT8oZW5naW5lOiBFbmdpbmUpOiB2b2lkXG4gIG9uQWRkRW50aXR5PyhlbnRpdHk6IEVudGl0eSk6IHZvaWRcbiAgb25SZW1vdmVFbnRpdHk/KGVudGl0eTogRW50aXR5KTogdm9pZFxuXG4gIGhhc0VudGl0eShlbnRpdHk6IEVudGl0eSk6IGJvb2xlYW4ge1xuICAgIGlmICghZW50aXR5LmVuZ2luZUlkKSByZXR1cm4gZmFsc2VcblxuICAgIHJldHVybiAhIXRoaXMuZW50aXRpZXNbZW50aXR5LmVuZ2luZUlkXVxuICB9XG5cbiAgYWRkRW50aXR5KGVudGl0eTogRW50aXR5KSB7XG4gICAgaWYgKCFlbnRpdHkuZW5naW5lSWQpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N5c3RlbTogQ2Fubm90IGFkZCBhIGVudGl0eSB0aGF0IGlzIG5vdCBhZGRlZCB0byB0aGUgZW5naW5lJylcbiAgICB9XG5cbiAgICBsZXQgd2FzUHJlc2VudCA9ICEhdGhpcy5lbnRpdGllc1tlbnRpdHkuZW5naW5lSWRdXG5cbiAgICB0aGlzLmVudGl0aWVzW2VudGl0eS5lbmdpbmVJZF0gPSBlbnRpdHlcblxuICAgIGlmICghd2FzUHJlc2VudCAmJiB0aGlzLm9uQWRkRW50aXR5KSB7XG4gICAgICB0aGlzLm9uQWRkRW50aXR5KGVudGl0eSlcbiAgICB9XG4gIH1cblxuICByZW1vdmVFbnRpdHkoZW50aXR5OiBFbnRpdHkpIHtcbiAgICBjb25zdCBpZCA9IGVudGl0eS5lbmdpbmVJZFxuXG4gICAgbGV0IHdhc1ByZXNlbnQgPSBmYWxzZVxuXG4gICAgaWYgKGlkKSB7XG4gICAgICB3YXNQcmVzZW50ID0gZGVsZXRlIHRoaXMuZW50aXRpZXNbaWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGlkIGluIHRoaXMuZW50aXRpZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuZW50aXRpZXNbaWRdID09PSBlbnRpdHkpIHtcbiAgICAgICAgICB3YXNQcmVzZW50ID0gdHJ1ZVxuICAgICAgICAgIGRlbGV0ZSB0aGlzLmVudGl0aWVzW2lkXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHdhc1ByZXNlbnQgJiYgdGhpcy5vblJlbW92ZUVudGl0eSkge1xuICAgICAgdGhpcy5vblJlbW92ZUVudGl0eShlbnRpdHkpXG4gICAgfVxuICB9XG5cbiAgbWVldHNSZXF1aXJlbWVudHMoXzogRW50aXR5KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvbmVudFN5c3RlbSBleHRlbmRzIFN5c3RlbSBpbXBsZW1lbnRzIElTeXN0ZW0ge1xuICBwcml2YXRlIF9yZXF1aXJlczogQ29tcG9uZW50Q29uc3RydWN0b3I8YW55PltdID0gW11cbiAgcHJpdmF0ZSBfcmVxdWlyZXNOYW1lczogc3RyaW5nW10gPSBbXVxuXG4gIGdldCByZXF1aXJlc05hbWVzKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1aXJlc05hbWVzLnNsaWNlKClcbiAgfVxuXG4gIGdldCByZXF1aXJlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWlyZXMuc2xpY2UoKVxuICB9XG5cbiAgY29uc3RydWN0b3IoLi4ucmVxdWlyZXM6IENvbXBvbmVudENvbnN0cnVjdG9yPGFueT5bXSkge1xuICAgIHN1cGVyKClcbiAgICAvLyB2YWxpZGF0ZSByZXF1aXJlcyBsaXN0XG4gICAgaWYgKCF0aGlzLnJlcXVpcmVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBvbmVudFN5c3RlbTogQ291bGQgbm90IGxvYWQgdGhlIHJlcXVpcmVzIGxpc3QnKVxuICAgIH1cbiAgICBpZiAoISh0aGlzLnJlcXVpcmVzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBvbmVudFN5c3RlbTogcmVxdWlyZXMgbGlzdCBpcyBub3QgYW4gQXJyYXknKVxuICAgIH1cbiAgICB0aGlzLl9yZXF1aXJlcyA9IHJlcXVpcmVzXG4gICAgdGhpcy5fcmVxdWlyZXMuZm9yRWFjaCgoY29tcG9uZW50LCBpeCkgPT4ge1xuICAgICAgbGV0IG5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cbiAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50U3lzdGVtOiB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGF0IGxvY2F0aW9uICR7aXh9IGlzIGludmFsaWRgKVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnQpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ29tcG9uZW50U3lzdGVtOiB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGF0IGxvY2F0aW9uICR7aXh9IGlzIG5vdCByZWdpc3RlcmVkLiBSZW1lbWJlciB0byBwYXNzIHRoZSBjbGFzcyBvZiB0aGUgY29tcG9uZW50LCBub3QgdGhlIG5hbWVgXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3JlcXVpcmVzTmFtZXMuc29tZSgkID0+ICQgPT09IG5hbWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50U3lzdGVtOiB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGxpc3QgaGFzIGEgcmVwZWF0ZWQgbmFtZSAke25hbWV9YClcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVxdWlyZXNOYW1lcy5wdXNoKG5hbWUpXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFJlbW92ZWQoZW50aXR5OiBFbnRpdHksIGNvbXBvbmVudDogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX3JlcXVpcmVzTmFtZXMuaW5kZXhPZihjb21wb25lbnQpICE9PSAtMSkge1xuICAgICAgdGhpcy5yZW1vdmVFbnRpdHkoZW50aXR5KVxuICAgIH1cbiAgfVxuXG4gIG1lZXRzUmVxdWlyZW1lbnRzKGVudGl0eTogRW50aXR5KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9yZXF1aXJlc05hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gdGhpcy5fcmVxdWlyZXNOYW1lc1tpXVxuICAgICAgaWYgKCEoY29tcG9uZW50TmFtZSBpbiBlbnRpdHkuY29tcG9uZW50cykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cbiJdfQ==\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/ecs/System.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/ecs/helpers.ts":
    /*!******************************************************!*\
      !*** ./packages/decentraland-ecs/src/ecs/helpers.ts ***!
      \******************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @internal\n */\nfunction uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0;\n        var v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexports.uuid = uuid;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lY3MvaGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOztHQUVHO0FBQ0gsU0FBZ0IsSUFBSTtJQUNsQixPQUFPLHNDQUFzQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsVUFBUyxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNoQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQTtRQUN2QyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDdkIsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBTkQsb0JBTUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXVpZCgpIHtcbiAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xuICAgIGxldCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwXG4gICAgbGV0IHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpXG4gIH0pXG59XG4iXX0=\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/ecs/helpers.ts?");

                                /***/
                            }),

    /***/ "./packages/decentraland-ecs/src/index.ts":
    /*!************************************************!*\
      !*** ./packages/decentraland-ecs/src/index.ts ***!
      \************************************************/
    /*! no static exports found */
    /***/ (function (module, exports, __webpack_require__) {

                                "use strict";
                                eval("\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// CORE DEPENDENCIES\n__export(__webpack_require__(/*! ./ecs/Engine */ \"./packages/decentraland-ecs/src/ecs/Engine.ts\"));\n__export(__webpack_require__(/*! ./ecs/Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\"));\n__export(__webpack_require__(/*! ./ecs/System */ \"./packages/decentraland-ecs/src/ecs/System.ts\"));\n__export(__webpack_require__(/*! ./ecs/Entity */ \"./packages/decentraland-ecs/src/ecs/Entity.ts\"));\nvar Systems_1 = __webpack_require__(/*! ./decentraland/Systems */ \"./packages/decentraland-ecs/src/decentraland/Systems.ts\");\nvar Implementation_1 = __webpack_require__(/*! ./decentraland/Implementation */ \"./packages/decentraland-ecs/src/decentraland/Implementation.ts\");\n// ECS INITIALIZATION\nvar Engine_1 = __webpack_require__(/*! ./ecs/Engine */ \"./packages/decentraland-ecs/src/ecs/Engine.ts\");\n// Initialize engine\n/** @public */\nvar engine = new Engine_1.Engine();\nexports.engine = engine;\n// Initialize onClickSystem\n/** @public */\nvar onClickSystem = new Systems_1.OnClickSystem();\nexports.onClickSystem = onClickSystem;\nengine.addSystem(onClickSystem);\nif (typeof dcl !== 'undefined') {\n    engine.addSystem(new Implementation_1.DecentralandSynchronizationSystem(dcl));\n}\nvar Component_1 = __webpack_require__(/*! ./ecs/Component */ \"./packages/decentraland-ecs/src/ecs/Component.ts\");\nComponent_1.DisposableComponent.engine = engine;\n// DECENTRALAND DEPENDENCIES\n__export(__webpack_require__(/*! ./decentraland/Components */ \"./packages/decentraland-ecs/src/decentraland/Components.ts\"));\n__export(__webpack_require__(/*! ./decentraland/Systems */ \"./packages/decentraland-ecs/src/decentraland/Systems.ts\"));\n__export(__webpack_require__(/*! ./decentraland/Events */ \"./packages/decentraland-ecs/src/decentraland/Events.ts\"));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvQkFBb0I7QUFDcEIsa0NBQTRCO0FBQzVCLHFDQUErQjtBQUMvQixrQ0FBNEI7QUFDNUIsa0NBQTRCO0FBRTVCLGtEQUFzRDtBQUN0RCxnRUFBaUY7QUFFakYscUJBQXFCO0FBQ3JCLHVDQUFxQztBQUVyQyxvQkFBb0I7QUFDcEIsY0FBYztBQUNkLElBQU0sTUFBTSxHQUFHLElBQUksZUFBTSxFQUFFLENBQUE7QUF5QmxCLHdCQUFNO0FBdkJmLDJCQUEyQjtBQUMzQixjQUFjO0FBQ2QsSUFBTSxhQUFhLEdBQUcsSUFBSSx1QkFBYSxFQUFFLENBQUE7QUFxQnhCLHNDQUFhO0FBcEI5QixNQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0FBUS9CLElBQUksT0FBTyxHQUFHLEtBQUssV0FBVyxFQUFFO0lBQzlCLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxrREFBaUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0NBQzdEO0FBRUQsNkNBQXFEO0FBQ3JELCtCQUFtQixDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7QUFFbkMsNEJBQTRCO0FBQzVCLCtDQUF5QztBQUN6Qyw0Q0FBc0M7QUFDdEMsMkNBQXFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ09SRSBERVBFTkRFTkNJRVNcbmV4cG9ydCAqIGZyb20gJy4vZWNzL0VuZ2luZSdcbmV4cG9ydCAqIGZyb20gJy4vZWNzL0NvbXBvbmVudCdcbmV4cG9ydCAqIGZyb20gJy4vZWNzL1N5c3RlbSdcbmV4cG9ydCAqIGZyb20gJy4vZWNzL0VudGl0eSdcblxuaW1wb3J0IHsgT25DbGlja1N5c3RlbSB9IGZyb20gJy4vZGVjZW50cmFsYW5kL1N5c3RlbXMnXG5pbXBvcnQgeyBEZWNlbnRyYWxhbmRTeW5jaHJvbml6YXRpb25TeXN0ZW0gfSBmcm9tICcuL2RlY2VudHJhbGFuZC9JbXBsZW1lbnRhdGlvbidcblxuLy8gRUNTIElOSVRJQUxJWkFUSU9OXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuL2Vjcy9FbmdpbmUnXG5cbi8vIEluaXRpYWxpemUgZW5naW5lXG4vKiogQHB1YmxpYyAqL1xuY29uc3QgZW5naW5lID0gbmV3IEVuZ2luZSgpXG5cbi8vIEluaXRpYWxpemUgb25DbGlja1N5c3RlbVxuLyoqIEBwdWJsaWMgKi9cbmNvbnN0IG9uQ2xpY2tTeXN0ZW0gPSBuZXcgT25DbGlja1N5c3RlbSgpXG5lbmdpbmUuYWRkU3lzdGVtKG9uQ2xpY2tTeXN0ZW0pXG5cbi8vIEluaXRpYWxpemUgRGVjZW50cmFsYW5kIGludGVyZmFjZVxuXG4vKiogQGludGVybmFsICovXG5pbXBvcnQgeyBEZWNlbnRyYWxhbmRJbnRlcmZhY2UgfSBmcm9tICcuL2RlY2VudHJhbGFuZC9UeXBlcydcbi8qKiBAaW50ZXJuYWwgKi9cbmRlY2xhcmUgbGV0IGRjbDogRGVjZW50cmFsYW5kSW50ZXJmYWNlXG5pZiAodHlwZW9mIGRjbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgZW5naW5lLmFkZFN5c3RlbShuZXcgRGVjZW50cmFsYW5kU3luY2hyb25pemF0aW9uU3lzdGVtKGRjbCkpXG59XG5cbmltcG9ydCB7IERpc3Bvc2FibGVDb21wb25lbnQgfSBmcm9tICcuL2Vjcy9Db21wb25lbnQnXG5EaXNwb3NhYmxlQ29tcG9uZW50LmVuZ2luZSA9IGVuZ2luZVxuXG4vLyBERUNFTlRSQUxBTkQgREVQRU5ERU5DSUVTXG5leHBvcnQgKiBmcm9tICcuL2RlY2VudHJhbGFuZC9Db21wb25lbnRzJ1xuZXhwb3J0ICogZnJvbSAnLi9kZWNlbnRyYWxhbmQvU3lzdGVtcydcbmV4cG9ydCAqIGZyb20gJy4vZGVjZW50cmFsYW5kL0V2ZW50cydcblxuZXhwb3J0IHsgZW5naW5lLCBvbkNsaWNrU3lzdGVtIH1cbiJdfQ==\n\n//# sourceURL=webpack:///./packages/decentraland-ecs/src/index.ts?");

                                /***/
                            })

                        /******/
                    });
            });;
    /*! dcl-amd */;
            (function (global) { "use strict"; var anonymous_queue = []; var settings = { baseUrl: "" }; var registeredModules = {}; function config(config) { if (typeof config === "object") { for (var x in config) { config.hasOwnProperty(x) && (settings[x] = config[x]) } } } function define(id, dependencies, factory) { var arg_count = arguments.length; if (arg_count === 1) { factory = id; dependencies = ["require", "exports", "module"]; id = null } else if (arg_count === 2) { if (settings.toString.call(id) === "[object Array]") { factory = dependencies; dependencies = id; id = null } else { factory = dependencies; dependencies = ["require", "exports", "module"] } } if (!id) { anonymous_queue.push([dependencies, factory]); return } function ready() { var handlers, context, module; if (registeredModules[id]) { handlers = registeredModules[id].handlers; context = registeredModules[id].context } module = registeredModules[id] = typeof factory === "function" ? factory.apply(null, anonymous_queue.slice.call(arguments, 0)) || registeredModules[id] || {} : factory; module.dclamd = 2; module.context = context; for (var x = 0, xl = handlers ? handlers.length : 0; x < xl; x++) { handlers[x](module) } } require(dependencies, ready, id) } define.amd = {}; function require(modules, callback, context) { var loaded_modules = []; var loaded_count = 0; var has_loaded = false; if (typeof modules === "string") { if (registeredModules[modules] && registeredModules[modules].dclamd === 2) { return registeredModules[modules] } throw new Error(modules + " has not been defined. Please include it as a dependency in " + context + "'s define()") } var xl = modules.length; for (var x = 0; x < xl; x++) { switch (modules[x]) { case "require": var _require = function (new_module, callback) { return require(new_module, callback, context) }; _require.toUrl = function (module) { return toUrl(module, context) }; loaded_modules[x] = _require; loaded_count++; break; case "exports": loaded_modules[x] = registeredModules[context] || (registeredModules[context] = {}); loaded_count++; break; case "module": loaded_modules[x] = { id: context, uri: toUrl(context) }; loaded_count++; break; case registeredModules[context] ? registeredModules[context].context : "": loaded_modules[x] = registeredModules[registeredModules[context].context]; loaded_count++; break; default: (function (x) { load(modules[x], function (def) { loaded_modules[x] = def; loaded_count++; loaded_count === xl && callback && (has_loaded = true, callback.apply(null, loaded_modules)) }, context) })(x) } } !has_loaded && loaded_count === xl && callback && callback.apply(null, loaded_modules) } function createMethodHandler(rpcHandle, method) { return function () { return dcl.callRpc(rpcHandle, method.name, anonymous_queue.slice.call(arguments, 0)) } } function load(module, callback, context) { module = context ? toUrl(module, context) : module; if (registeredModules[module]) { if (registeredModules[module].dclamd === 1) { callback && registeredModules[module].handlers.push(callback) } else { callback && callback(registeredModules[module]) } return } else { registeredModules[module] = { dclamd: 1, handlers: [callback], context: context } } if (module.indexOf("@") === 0) { if (typeof dcl !== "undefined") { dcl.loadModule(module).then(function (descriptor) { var createdModule = {}; for (var i in descriptor.methods) { var method = descriptor.methods[i]; createdModule[method.name] = createMethodHandler(descriptor.rpcHandle, method) } callback(createdModule) }) } } } if (typeof dcl !== "undefined") { dcl.onStart(function () { var notLoadedModules = []; for (var i in registeredModules) { if (registeredModules[i] && registeredModules[i].dclamd === 1) { notLoadedModules.push(registeredModules[i]) } } if (notLoadedModules.length) { throw new Error("These modules didn't load: " + notLoadedModules.join(", ")) } }) } function toUrl(id, context) { var changed = false; switch (id) { case "require": case "exports": case "module": return id }var new_context = (context || settings.baseUrl).split("/"); new_context.pop(); var idParts = id.split("/"); var i = idParts.length; while (--i) { switch (id[0]) { case "..": new_context.pop(); case ".": case "": idParts.shift(); changed = true } } return (new_context.length && changed ? new_context.join("/") + "/" : "") + idParts.join("/") } require.toUrl = toUrl; global.dclamd = { config: config, define: global.define = define, require: require, registeredModules: registeredModules } })(typeof global !== "undefined" && global || this);;
    /*! Compiled code */;
            var __extends = (this && this.__extends) || (function () {
                var extendStatics = function (d, b) {
                    extendStatics = Object.setPrototypeOf ||
                        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
                        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
                    return extendStatics(d, b);
                }
                return function (d, b) {
                    extendStatics(d, b);
                    function __() { this.constructor = d; }
                    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
                };
            })();
            var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
                if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
                else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
                return c > 3 && r && Object.defineProperty(target, key, r), r;
            };
            define("game", ["require", "exports"], function (require, exports) {
                "use strict";
                Object.defineProperty(exports, "__esModule", { value: true });
                var RotatorSystem = /** @class */ (function (_super) {
                    __extends(RotatorSystem, _super);
                    function RotatorSystem() {
                        return _super.call(this, Rotation) || this;
                    }
                    RotatorSystem.prototype.update = function (dt) {
                        for (var i in this.entities) {
                            var rotation = this.entities[i].get(Rotation);
                            rotation.y += dt * 10;
                        }
                    };
                    return RotatorSystem;
                }(ComponentSystem));
                exports.RotatorSystem = RotatorSystem;
                var TraslatorSystem = /** @class */ (function (_super) {
                    __extends(TraslatorSystem, _super);
                    function TraslatorSystem() {
                        return _super.call(this, Position, Counter) || this;
                    }
                    TraslatorSystem.prototype.update = function (dt) {
                        for (var i in this.entities) {
                            var position = this.entities[i].get(Position);
                            var counter = this.entities[i].get(Counter);
                            position.x = 5 + 3 * Math.sin(counter.number);
                            position.z = 3 + 3 * Math.cos(counter.number);
                            counter.number += dt / 10;
                        }
                    };
                    return TraslatorSystem;
                }(ComponentSystem));
                exports.TraslatorSystem = TraslatorSystem;
                var Counter = /** @class */ (function () {
                    function Counter() {
                        this.number = 0;
                    }
                    Counter = __decorate([
                        Component('a counter')
                    ], Counter);
                    return Counter;
                }());
                exports.Counter = Counter;
                var cube = new Entity();
                cube.set(new Position());
                cube.set(new BoxShape());
                cube.set(new Rotation());
                cube.set(new Counter());
                engine.addEntity(cube);
                engine.addSystem(new RotatorSystem());
                engine.addSystem(new TraslatorSystem());
            });
        }
    </script>
    <script>
        var gameInstance = UnityLoader.instantiate("gameContainer", "%UNITY_WEBGL_BUILD_URL%");

        // TODO: move this into an external JS file where the WASM build is deployed and load it here.
        window.dcl = {
            log: function (messagesLog) {
                console.log("log: " + messagesLog);
            },
            onStart: function (callback) {
                //console.log("onStart called on entity", arguments);
            },
            onUpdate: function (callback) {
                var previousTime = performance.now();

                setInterval(function () {
                    var currentTime = performance.now();

                    callback((currentTime - previousTime) / 1000);

                    previousTime = currentTime;
                }, 30);
            },
            onEvent: function (callback) {
                //console.log("onEvent called on entity", arguments);
            },
            addEntity: function (entityId) {
                var entityJSON = {
                    id: entityId
                };

                gameInstance.SendMessage(
                    "SceneController",
                    "CreateEntity",
                    JSON.stringify(entityJSON)
                );
            },
            updateEntity: function (entityId, components) {
                // components: Record<string, Component>
                var newComponents = {};
                for (var key in components) {
                    if (key.startsWith("engine."))
                        newComponents[key.replace("engine.", "")] = components[key];
                }

                var entityJSON = {
                    id: entityId,
                    components: newComponents
                };

                gameInstance.SendMessage(
                    "SceneController",
                    "UpdateEntity",
                    JSON.stringify(entityJSON)
                );
            },
            removeEntity: function (entityId) { },
            componentAdded: function (entityId, componentName, component) { },
            componentRemoved: function (entityId, componentName) { },
            setParent: function (entityId, parentId) {
                var entityJSON = {
                    id: entityId,
                    parentId: parentId
                };

                gameInstance.SendMessage(
                    "SceneController",
                    "SetEntityParent",
                    JSON.stringify(entityJSON)
                );
            },
            subscribe: function (eventName) {
                console.log("entity subscribed to event: " + eventName);
            },
            unsubscribe: function (eventName) {
                console.log("entity unsubscribed from event: " + eventName);
            }
        };

    </script>
</head>

<body>
    <div id="gameContainer" style="width: 960px; height: 600px; margin: auto"></div>
</body>

</html>